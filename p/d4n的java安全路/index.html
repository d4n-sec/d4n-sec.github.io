<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='æœ¬ç« æ˜¯ D4nçš„Javaå®‰å…¨å…¥é—¨ ç¬¬ä¸€ç¯‡ï¼Œæœ›å¤§ä½¬æŒ‡æ­£ï¼Œå°ç™½é¿å‘
'>
<title>D4nçš„Javaå®‰å…¨è·¯</title>

<link rel='canonical' href='https://d4n-sec.github.io/p/d4n%E7%9A%84java%E5%AE%89%E5%85%A8%E8%B7%AF/'>

<link rel="stylesheet" href="/scss/style.min.abbd69b2908fdfcd5179898beaafd374514a86538d81639ddd2c58c06ae54e40.css"><meta property='og:title' content='D4nçš„Javaå®‰å…¨è·¯'>
<meta property='og:description' content='æœ¬ç« æ˜¯ D4nçš„Javaå®‰å…¨å…¥é—¨ ç¬¬ä¸€ç¯‡ï¼Œæœ›å¤§ä½¬æŒ‡æ­£ï¼Œå°ç™½é¿å‘
'>
<meta property='og:url' content='https://d4n-sec.github.io/p/d4n%E7%9A%84java%E5%AE%89%E5%85%A8%E8%B7%AF/'>
<meta property='og:site_name' content='Dan`s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Javaå­¦ä¹ è·¯' /><meta property='article:published_time' content='2023-04-06T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2023-04-06T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="D4nçš„Javaå®‰å…¨è·¯">
<meta name="twitter:description" content="æœ¬ç« æ˜¯ D4nçš„Javaå®‰å…¨å…¥é—¨ ç¬¬ä¸€ç¯‡ï¼Œæœ›å¤§ä½¬æŒ‡æ­£ï¼Œå°ç™½é¿å‘
">
    <link rel="shortcut icon" href="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/paper-plane-64.webp" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    <img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/TX.jpg" width="300" height="300" class="site-logo" loading="lazy" alt="Avatar">
                
                </a>
                
                    <span class="emoji">ğŸ¹</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Dan`s Blog</a></h1>
            <h2 class="site-description">ä»Šäººä¸è§å¤æ—¶æœˆ</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='/%E5%85%B3%E4%BA%8E'
                        target="_blank"
                        title="contactMe"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1709702435352" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8388" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32z m-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5z" fill="#bfbfbf" p-id="8389"></path><path d="M833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6c20.2 15.7 48.5 15.7 68.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z" p-id="8390" fill="#bfbfbf"></path></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/d4n-sec'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='http://wpa.qq.com/msgrd?v=3&amp;uin=1664022865&amp;site=qq&amp;menu=yes'
                        target="_blank"
                        title="QQNum"
                        rel="me"
                    >
                        
                        
                            
<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1709702077457" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13062" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M824.8 613.2c-16-51.4-34.4-94.6-62.7-165.3C766.5 262.2 689.3 112 511.5 112 331.7 112 256.2 265.2 261 447.9c-28.4 70.8-46.7 113.7-62.7 165.3-34 109.5-23 154.8-14.6 155.8 18 2.2 70.1-82.4 70.1-82.4 0 49 25.2 112.9 79.8 159-26.4 8.1-85.7 29.9-71.6 53.8 11.4 19.3 196.2 12.3 249.5 6.3 53.3 6 238.1 13 249.5-6.3 14.1-23.8-45.3-45.7-71.6-53.8 54.6-46.2 79.8-110.1 79.8-159 0 0 52.1 84.6 70.1 82.4 8.5-1.1 19.5-46.4-14.5-155.8z" p-id="13063" fill="#bfbfbf"></path></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
    </ol>
    <div class="menu-bottom-section">
        <ol class="menu">

            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>æš—è‰²æ¨¡å¼</span>
                </li>
            
        </ol>
    </div>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li>
      <ol>
        <li><a href="#javaååºåˆ—åŒ–">Javaååºåˆ—åŒ–</a>
          <ol>
            <li><a href="#ä»€ä¹ˆæ˜¯ååºåˆ—åŒ–">ä»€ä¹ˆæ˜¯ååºåˆ—åŒ–</a></li>
            <li><a href="#ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–">ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–</a></li>
            <li><a href="#ååºåˆ—åŒ–æ¼æ´æ¥æº">ååºåˆ—åŒ–æ¼æ´æ¥æº</a></li>
            <li><a href="#å¦‚ä½•åºåˆ—åŒ–ä¸ååºåˆ—åŒ–">å¦‚ä½•åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</a>
              <ol>
                <li><a href="#jdkç±»åº“æä¾›çš„åºåˆ—åŒ–api">JDKç±»åº“æä¾›çš„åºåˆ—åŒ–API</a></li>
                <li><a href="#javaå¯¹è±¡åºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„è°ƒç”¨æµç¨‹">Javaå¯¹è±¡åºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„è°ƒç”¨æµç¨‹</a></li>
                <li><a href="#å°è¯•åºåˆ—åŒ–">å°è¯•åºåˆ—åŒ–</a></li>
                <li><a href="#æ€»ç»“åºåˆ—åŒ–å…·ä½“æ­¥éª¤">æ€»ç»“åºåˆ—åŒ–å…·ä½“æ­¥éª¤</a></li>
              </ol>
            </li>
            <li><a href="#åºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„å¿…è¦æ¡ä»¶">åºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„å¿…è¦æ¡ä»¶</a></li>
            <li><a href="#åºåˆ—åŒ–ä¸­æ¶‰åŠç»†èŠ‚">åºåˆ—åŒ–ä¸­æ¶‰åŠç»†èŠ‚</a>
              <ol>
                <li><a href="#serialversionuid">serialVersionUID</a>
                  <ol>
                    <li><a href="#ç‰ˆæœ¬æ§åˆ¶">ç‰ˆæœ¬æ§åˆ¶</a></li>
                    <li><a href="#å¸¸è§åœºæ™¯">å¸¸è§åœºæ™¯</a></li>
                    <li><a href="#serialversionuid-ä½¿ç”¨åœºæ™¯">serialVersionUID ä½¿ç”¨åœºæ™¯</a></li>
                  </ol>
                </li>
                <li><a href="#åºåˆ—åŒ–å­˜å‚¨è§„åˆ™">åºåˆ—åŒ–å­˜å‚¨è§„åˆ™</a></li>
                <li><a href="#æ›´å¤šç»†èŠ‚">æ›´å¤šç»†èŠ‚</a></li>
              </ol>
            </li>
            <li><a href="#åˆè¯†ååºåˆ—åŒ–æ¼æ´">åˆè¯†ååºåˆ—åŒ–æ¼æ´</a></li>
            <li><a href="#å¯¹ååºåˆ—åŒ–çš„ç–‘é—®ä¸åˆ†æ">å¯¹ååºåˆ—åŒ–çš„ç–‘é—®ä¸åˆ†æ</a>
              <ol>
                <li><a href="#ç¬¬ä¸€ä¸ªé—®é¢˜">ç¬¬ä¸€ä¸ªé—®é¢˜</a></li>
                <li><a href="#ç¬¬äºŒä¸ªé—®é¢˜">ç¬¬äºŒä¸ªé—®é¢˜</a></li>
              </ol>
            </li>
            <li><a href="#popé“¾">POPé“¾</a></li>
            <li><a href="#åå°„">åå°„</a>
              <ol>
                <li><a href="#è·å–classå¯¹è±¡">è·å–Classå¯¹è±¡</a></li>
                <li><a href="#è·å–æˆå‘˜å˜é‡field">è·å–æˆå‘˜å˜é‡Field</a></li>
                <li><a href="#è·å–æˆå‘˜æ–¹æ³•method">è·å–æˆå‘˜æ–¹æ³•Method</a></li>
                <li><a href="#è·å–æ„é€ å‡½æ•°">è·å–æ„é€ å‡½æ•°</a></li>
                <li><a href="#a-nameduixiangè·å–å¯¹è±¡a"><a name='duixiang'>è·å–å¯¹è±¡</a></a></li>
                <li><a href="#è°ƒç”¨æ–¹æ³•æ­¥éª¤">è°ƒç”¨æ–¹æ³•æ­¥éª¤</a></li>
                <li><a href="#æ„é€ å‡½æ•°ç§æœ‰åŒ–">æ„é€ å‡½æ•°ç§æœ‰åŒ–</a></li>
              </ol>
            </li>
            <li><a href="#æ³›å‹">æ³›å‹</a></li>
            <li><a href="#ç›¸å…³è¡¥å……">ç›¸å…³è¡¥å……</a></li>
            <li><a href="#a-namelinkå‚è€ƒé“¾æ¥a"><a name='link'>å‚è€ƒé“¾æ¥</a></a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/java%E5%AD%A6%E4%B9%A0%E8%B7%AF/" >
                Javaå­¦ä¹ è·¯
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/d4n%E7%9A%84java%E5%AE%89%E5%85%A8%E8%B7%AF/">D4nçš„Javaå®‰å…¨è·¯</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Apr 06, 2023 00:00 UTC</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 33 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>æœ¬ç« æ˜¯ D4nçš„Javaå®‰å…¨å…¥é—¨ ç¬¬ä¸€ç¯‡ï¼Œæœ›å¤§ä½¬æŒ‡æ­£ï¼Œå°ç™½é¿å‘</p>
<p>æµ‹è¯•ç”¨Javaç‰ˆæœ¬ï¼ˆ17.0.6ï¼‰</p>
<h2 id="javaååºåˆ—åŒ–">Javaååºåˆ—åŒ–</h2>
<h3 id="ä»€ä¹ˆæ˜¯ååºåˆ—åŒ–">ä»€ä¹ˆæ˜¯ååºåˆ—åŒ–</h3>
<p>â€‹		å€Ÿç”¨ä¸€ä¸‹å¤§ä½¬çš„æè¿°ï¼š</p>
<blockquote>
<p>Javaæè¿°çš„æ˜¯ä¸€ä¸ªâ€˜ä¸–ç•Œâ€™ï¼Œç¨‹åºè¿è¡Œå¼€å§‹æ—¶ï¼Œè¿™ä¸ªâ€˜ä¸–ç•Œâ€™ä¹Ÿå¼€å§‹è¿ä½œï¼Œä½†â€˜ä¸–ç•Œâ€™ä¸­çš„å¯¹è±¡ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼Œå®ƒçš„å±æ€§ä¼šéšç€ç¨‹åºçš„è¿è¡Œè€Œæ”¹å˜ã€‚
ä½†å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä¿å­˜æŸä¸€åˆ»æŸä¸ªå¯¹è±¡çš„ä¿¡æ¯ï¼Œæ¥è¿›è¡Œä¸€äº›æ“ä½œã€‚æ¯”å¦‚åˆ©ç”¨ååºåˆ—åŒ–å°†ç¨‹åºè¿è¡Œçš„å¯¹è±¡çŠ¶æ€ä»¥äºŒè¿›åˆ¶å½¢å¼å‚¨å­˜ä¸æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œç„¶åå¯ä»¥åœ¨å¦ä¸€ä¸ªç¨‹åºä¸­å¯¹åºåˆ—åŒ–åçš„å¯¹è±¡çŠ¶æ€æ•°æ®è¿›è¡Œååºåˆ—åŒ–æ¢å¤å¯¹è±¡ã€‚å¯ä»¥æœ‰æ•ˆåœ°å®ç°å¤šå¹³å°ä¹‹é—´çš„é€šä¿¡ã€å¯¹è±¡æŒä¹…åŒ–å­˜å‚¨ã€‚</p>
<p>åºåˆ—åŒ–ä¸ååºåˆ—åŒ–æ˜¯è®©Javaå¯¹è±¡è„±ç¦»Javaè¿è¡Œç¯å¢ƒçš„ä¸€ç§æ‰‹æ®µï¼Œå¯ä»¥æœ‰æ•ˆçš„å®ç°å¤šå¹³å°ä¹‹é—´çš„é€šä¿¡ã€å¯¹è±¡æŒä¹…åŒ–å­˜å‚¨ã€‚</p>
</blockquote>
<p>â€‹		ç”¨è‡ªå·±çš„è¯è¯´å°±æ˜¯ï¼Œå¦‚æœéœ€è¦ä¼ è¾“ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–æ˜¯ä¸€æ®µæ•°æ®ï¼‰ç»™ç›®æ ‡ï¼ˆé€”å¾„å¯ä»¥æ˜¯ç½‘ç»œï¼Œè¿›ç¨‹é—´ç­‰ä»»ä½•å¯ä»¥ä¼ è¾“æ•°æ®çš„åœ°æ–¹ï¼Œç›®æ ‡å¯ä»¥æ˜¯å®¢æˆ·ç«¯ï¼Œå­è¿›ç¨‹ï¼Œçº¿ç¨‹ç­‰ï¼‰éœ€è¦å°†å¯¹è±¡çš„ä¸€äº›æˆ–è€…æ‰€æœ‰ä¿¡æ¯ä»¥ä¸€ç§æ ¼å¼ä¼ è¾“ç»™ç›®æ ‡ï¼Œæ¯”å¦‚å¸¸è§çš„<code>JSONã€XMLã€YAML</code>æ ¼å¼ï¼Œå°±æ˜¯å°†ä¸€äº›æ•°æ®æ ¼å¼åŒ–ä¸ºç›¸åº”æ ‡å‡†æ ¼å¼çš„ä¾‹å­</p>
<p>â€‹		è¿™ç§å°†æ•°æ®æ ¼å¼æ ‡å‡†åŒ–çš„è¿‡ç¨‹å°±å¯ä»¥ç§°ä¹‹ä¸º<strong>åºåˆ—åŒ–</strong>ï¼Œè€Œå¯¹åº”çš„ï¼Œç›®æ ‡æ¥æ”¶åˆ°è¿™ç§æ ¼å¼åŒ–æ•°æ®ä¹‹åï¼Œå°†å¯¹è±¡æˆ–è€…æ•°æ®è¿˜åŸæˆåŸæœ¬æˆ–è€…éœ€è¦çš„æ ·å­å°±ç§°ä¸º<strong>ååºåˆ—åŒ–</strong>ã€‚</p>
<p>â€‹		åœ¨Javaä¸­æƒ³è¦åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œéœ€è¦åŒæ—¶æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š</p>
<blockquote>
<ol>
<li>è¯¥ç±»å¿…é¡»å®ç° java.io.Serializable æ¥å£ã€‚</li>
<li>è¯¥ç±»çš„æ‰€æœ‰å±æ€§å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ã€‚å¦‚æœæœ‰ä¸€ä¸ªå±æ€§ä¸æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œåˆ™è¯¥å±æ€§å¿…é¡»æ³¨æ˜æ˜¯çŸ­æš‚çš„ã€‚</li>
</ol>
</blockquote>
<p>â€‹		<code>åªæœ‰å®ç°äº†Serializableæˆ–Externalizableæ¥å£çš„ç±»çš„å¯¹è±¡æ‰èƒ½è¢«åºåˆ—åŒ–ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</code>
â€‹		æ³¨ï¼šExternalizable æ˜¯ç»§æ‰¿äº†Serializableçš„æŠ½è±¡ç±»</p>
<p>â€‹		æ‰€ä»¥ä½ æƒ³çŸ¥é“ä¸€ä¸ªJavaæ ‡å‡†ç±»æ˜¯å¦æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œå¯ä»¥æŸ¥çœ‹ä»–çš„ç±»æè¿°ï¼Œçœ‹æ˜¯å¦å®ç°äº†java.io.Serializableæ¥å£</p>
<h3 id="ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–">ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–</h3>
<blockquote>
<p>å¯¹è±¡ä¸åªæ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå®ƒè¿˜éœ€è¦åœ¨ä¼ è¾“ç½‘ç»œä¸­è¿›è¡Œä¼ è¾“ï¼Œå¹¶ä¸”ä¿å­˜èµ·æ¥ä¹‹åä¸‹æ¬¡å†åŠ è½½å‡ºæ¥ï¼Œè¿™æ—¶å€™å°±éœ€è¦åºåˆ—åŒ–æŠ€æœ¯ã€‚</p>
<p>Javaçš„åºåˆ—åŒ–æŠ€æœ¯å°±æ˜¯æŠŠ<strong>å¯¹è±¡è½¬æ¢æˆä¸€ä¸²ç”±äºŒè¿›åˆ¶å­—èŠ‚ç»„æˆçš„æ•°ç»„</strong>ï¼Œç„¶åå°†è¿™äºŒè¿›åˆ¶æ•°æ®ä¿å­˜åœ¨ç£ç›˜æˆ–ä¼ è¾“ç½‘ç»œã€‚è€Œåéœ€è¦ç”¨åˆ°è¿™å¯¹è±¡æ—¶ï¼Œç£ç›˜æˆ–è€…ç½‘ç»œæ¥æ”¶è€…å¯ä»¥é€šè¿‡ååºåˆ—åŒ–å¾—åˆ°æ­¤å¯¹è±¡ï¼Œè¾¾åˆ°<strong>å¯¹è±¡æŒä¹…åŒ–</strong>çš„ç›®çš„ã€‚</p>
</blockquote>
<h3 id="ååºåˆ—åŒ–æ¼æ´æ¥æº">ååºåˆ—åŒ–æ¼æ´æ¥æº</h3>
<ol>
<li>
<p>å¼€å‘å¤±è¯¯</p>
<ul>
<li>å¼€å‘äººå‘˜å¹¶æ²¡æœ‰é‡å†™<code>ObjectInputStream</code>ç±»çš„<code>resolveClass</code>æ–¹æ³•ï¼Œæˆ–è€…é‡å†™è¿‡ä½†æ˜¯è¿‡æ»¤ä¸ä¸¥æ ¼å°±ä¼šå¯¼è‡´ååºåˆ—åŒ–æ¼æ´</li>
</ul>
</li>
<li>
<p>ä½¿ç”¨äº†ä¸å®‰å…¨çš„åŸºç¡€åº“</p>
<ul>
<li>â€‹	å¾ˆå¤§æ¯”ä¾‹çš„ååºåˆ—åŒ–æ¼æ´æ˜¯å› ä½¿ç”¨äº†ä¸å®‰å…¨çš„åŸºç¡€åº“è€Œäº§ç”Ÿçš„ï¼Œä¸€èˆ¬ä¼˜ç§€çš„Javaå¼€å‘äººå‘˜ä¼šæŒ‰ç…§å®‰å…¨ç¼–ç¨‹è§„èŒƒè¿›è¡Œç¼–ç¨‹ï¼Œå¹¶ä¸”ä¸€äº›æˆç†Ÿçš„Javaæ¡†æ¶ <code>Spring MVCã€Struts2</code>ç­‰ä¼šæœ‰ç›¸åº”çš„é˜²èŒƒæœºåˆ¶ï¼Œå¦‚æœåªæ˜¯å¼€å‘å¤±è¯¯çš„è¯ï¼Œèƒ½é€ æˆçš„ååºåˆ—åŒ–æ¼æ´å¾ˆå°‘
â€‹	ä½†ä½¿ç”¨ä¸å®‰å…¨çš„åŸºç¡€åº“åˆ™ä¸ä¸€æ ·</li>
</ul>
</li>
</ol>
<blockquote>
<p>â€‹    2015å¹´ç”±é»‘å®¢Gabriel Lawrenceå’ŒChris Frohoffå‘ç°çš„<code>Apache Commons Collections</code>ç±»åº“ç›´æ¥å½±å“äº†WebLogicã€WebSphereã€JBossã€Jenkinsã€OpenNMSç­‰å¤§å‹æ¡†æ¶ã€‚ç›´åˆ°ä»Šå¤©è¯¥æ¼æ´çš„å½±å“ä»æœªæ¶ˆæ•£ã€‚
å­˜åœ¨å±é™©çš„åŸºç¡€åº“ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="n">commons</span><span class="o">-</span><span class="n">fileupload</span><span class="w"> </span><span class="n">1</span><span class="p">.</span><span class="na">3</span><span class="p">.</span><span class="na">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">commons</span><span class="o">-</span><span class="n">io</span><span class="w"> </span><span class="n">2</span><span class="p">.</span><span class="na">4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">commons</span><span class="o">-</span><span class="n">collections</span><span class="w"> </span><span class="n">3</span><span class="p">.</span><span class="na">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">commons</span><span class="o">-</span><span class="n">logging</span><span class="w"> </span><span class="n">1</span><span class="p">.</span><span class="na">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">commons</span><span class="o">-</span><span class="n">beanutils</span><span class="w"> </span><span class="n">1</span><span class="p">.</span><span class="na">9</span><span class="p">.</span><span class="na">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">slf4j</span><span class="p">:</span><span class="n">slf4j</span><span class="o">-</span><span class="n">api</span><span class="w"> </span><span class="n">1</span><span class="p">.</span><span class="na">7</span><span class="p">.</span><span class="na">21</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">com</span><span class="p">.</span><span class="na">mchange</span><span class="p">:</span><span class="n">mchange</span><span class="o">-</span><span class="n">commons</span><span class="o">-</span><span class="n">java</span><span class="w"> </span><span class="n">0</span><span class="p">.</span><span class="na">2</span><span class="p">.</span><span class="na">11</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">commons</span><span class="p">:</span><span class="n">commons</span><span class="o">-</span><span class="n">collections</span><span class="w"> </span><span class="n">4</span><span class="p">.</span><span class="na">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">com</span><span class="p">.</span><span class="na">mchange</span><span class="p">:</span><span class="n">c3p0</span><span class="w"> </span><span class="n">0</span><span class="p">.</span><span class="na">9</span><span class="p">.</span><span class="na">5</span><span class="p">.</span><span class="na">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">beanshell</span><span class="p">:</span><span class="n">bsh</span><span class="w"> </span><span class="n">2</span><span class="p">.</span><span class="na">0b5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">codehaus</span><span class="p">.</span><span class="na">groovy</span><span class="p">:</span><span class="n">groovy</span><span class="w"> </span><span class="n">2</span><span class="p">.</span><span class="na">3</span><span class="p">.</span><span class="na">9</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">:</span><span class="n">spring</span><span class="o">-</span><span class="n">aop</span><span class="w"> </span><span class="n">4</span><span class="p">.</span><span class="na">1</span><span class="p">.</span><span class="na">4</span><span class="p">.</span><span class="na">RELEASE</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æŸååºåˆ—åŒ–é˜²æŠ¤è½¯ä»¶ä¾¿æ˜¯é€šè¿‡ç¦ç”¨ä»¥ä¸‹ç±»çš„ååºåˆ—åŒ–æ¥ä¿æŠ¤ç¨‹åºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="err">&#39;</span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">commons</span><span class="p">.</span><span class="na">collections</span><span class="p">.</span><span class="na">functors</span><span class="p">.</span><span class="na">InvokerTransformer</span><span class="err">&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">&#39;</span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">commons</span><span class="p">.</span><span class="na">collections</span><span class="p">.</span><span class="na">functors</span><span class="p">.</span><span class="na">InstantiateTransformer</span><span class="err">&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">&#39;</span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">commons</span><span class="p">.</span><span class="na">collections4</span><span class="p">.</span><span class="na">functors</span><span class="p">.</span><span class="na">InvokerTransformer</span><span class="err">&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">&#39;</span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">commons</span><span class="p">.</span><span class="na">collections4</span><span class="p">.</span><span class="na">functors</span><span class="p">.</span><span class="na">InstantiateTransformer</span><span class="err">&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">&#39;</span><span class="n">org</span><span class="p">.</span><span class="na">codehaus</span><span class="p">.</span><span class="na">groovy</span><span class="p">.</span><span class="na">runtime</span><span class="p">.</span><span class="na">ConvertedClosure</span><span class="err">&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">&#39;</span><span class="n">org</span><span class="p">.</span><span class="na">codehaus</span><span class="p">.</span><span class="na">groovy</span><span class="p">.</span><span class="na">runtime</span><span class="p">.</span><span class="na">MethodClosure</span><span class="err">&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">&#39;</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">beans</span><span class="p">.</span><span class="na">factory</span><span class="p">.</span><span class="na">ObjectFactory</span><span class="err">&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">&#39;</span><span class="n">xalan</span><span class="p">.</span><span class="na">internal</span><span class="p">.</span><span class="na">xsltc</span><span class="p">.</span><span class="na">trax</span><span class="p">.</span><span class="na">TemplatesImpl</span><span class="err">&#39;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<p>â€‹	åŸºç¡€åº“ä¸­çš„è°ƒç”¨æµç¨‹ä¸€èˆ¬éƒ½æ¯”è¾ƒå¤æ‚ï¼Œä¸ä¼šå¦‚åŒæ¥ä¸‹æ¥ç»™å‡ºçš„æµ‹è¯•ç”¨ä¾‹ä¸€èˆ¬ç®€å•ï¼Œæ¶‰åŠåˆ°POPé“¾ï¼Œåå°„ï¼Œæ³›å‹ç­‰çŸ¥è¯†</p>
<h3 id="å¦‚ä½•åºåˆ—åŒ–ä¸ååºåˆ—åŒ–">å¦‚ä½•åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</h3>
<h4 id="jdkç±»åº“æä¾›çš„åºåˆ—åŒ–api">JDKç±»åº“æä¾›çš„åºåˆ—åŒ–API</h4>
<blockquote>
<ul>
<li>java.io.ObjectOutputStreamï¼šè¡¨ç¤ºå¯¹è±¡è¾“å‡ºæµ
å®ƒçš„writeObject(Object obj)æ–¹æ³•å¯ä»¥å¯¹å‚æ•°æŒ‡å®šçš„objå¯¹è±¡è¿›è¡Œåºåˆ—åŒ–ï¼ŒæŠŠå¾—åˆ°çš„å­—èŠ‚åºåˆ—å†™åˆ°ä¸€ä¸ªç›®æ ‡è¾“å‡ºæµä¸­ã€‚</li>
<li>java.io.ObjectInputStreamï¼šè¡¨ç¤ºå¯¹è±¡è¾“å…¥æµ
å®ƒçš„readObject()æ–¹æ³•ä»æºè¾“å…¥æµä¸­è¯»å–å­—èŠ‚åºåˆ—ï¼Œå†æŠŠå®ƒä»¬ååºåˆ—åŒ–æˆä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†å…¶è¿”å›ã€‚</li>
</ul>
</blockquote>
<h4 id="javaå¯¹è±¡åºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„è°ƒç”¨æµç¨‹">Javaå¯¹è±¡åºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„è°ƒç”¨æµç¨‹</h4>
<blockquote>
<ol>
<li>
<p>æ–¹æ³•ä¸€ï¼š</p>
<p>è‹¥Studentç±»ä»…ä»…å®ç°äº†Serializableæ¥å£ï¼Œåˆ™å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–¹å¼è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚
ObjectOutputStreamé‡‡ç”¨é»˜è®¤çš„åºåˆ—åŒ–æ–¹å¼ï¼Œå¯¹Studentå¯¹è±¡çš„étransientçš„å®ä¾‹å˜é‡è¿›è¡Œåºåˆ—åŒ–ã€‚
ObjcetInputStreamé‡‡ç”¨é»˜è®¤çš„ååºåˆ—åŒ–æ–¹å¼ï¼Œå¯¹å¯¹Studentå¯¹è±¡çš„étransientçš„å®ä¾‹å˜é‡è¿›è¡Œååºåˆ—åŒ–ã€‚</p>
</li>
<li>
<p>æ–¹æ³•äºŒï¼š</p>
<p>è‹¥Studentç±»ä»…ä»…å®ç°äº†Serializableæ¥å£ï¼Œå¹¶ä¸”è¿˜å®šä¹‰äº†readObject(ObjectInputStream in)å’ŒwriteObject(ObjectOutputSteam out)ï¼Œ
ObjectOutputStreamè°ƒç”¨Studentå¯¹è±¡çš„writeObject(ObjectOutputStream out)çš„æ–¹æ³•è¿›è¡Œåºåˆ—åŒ–ã€‚
ObjectInputStreamä¼šè°ƒç”¨Studentå¯¹è±¡çš„readObject(ObjectInputStream in)çš„æ–¹æ³•è¿›è¡Œååºåˆ—åŒ–ã€‚</p>
</li>
<li>
<p>æ–¹æ³•ä¸‰ï¼š</p>
<p>è‹¥Studentç±»å®ç°äº†Externalnalizableæ¥å£ï¼Œä¸”Studentç±»å¿…é¡»å®ç°readExternal(ObjectInput in)å’ŒwriteExternal(ObjectOutput out)æ–¹æ³•ï¼Œåˆ™æŒ‰ç…§ä»¥ä¸‹æ–¹å¼è¿›è¡Œåºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚
ObjectOutputStreamè°ƒç”¨Studentå¯¹è±¡çš„writeExternal(ObjectOutput out))çš„æ–¹æ³•è¿›è¡Œåºåˆ—åŒ–ã€‚
ObjectInputStreamä¼šè°ƒç”¨Studentå¯¹è±¡çš„readExternal(ObjectInput in)çš„æ–¹æ³•è¿›è¡Œååºåˆ—åŒ–ã€‚</p>
</li>
</ol>
</blockquote>
<h4 id="å°è¯•åºåˆ—åŒ–">å°è¯•åºåˆ—åŒ–</h4>
<p>å…ˆå†™ä¸€ä¸ªå¾…ååºåˆ—åŒ–çš„ç±»ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Employee</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">Serializable</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">identify</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">mailCheck</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;This is the &#34;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="na">identify</span><span class="o">+</span><span class="s">&#34; of our company&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åå†å†™ä¸€ä¸ªåºåˆ—åŒ–å’Œååºåˆ—åŒ–æµ‹è¯•ç±»ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.IOException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SerializeDemo</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Employee</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Employee</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">e</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;my name&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">e</span><span class="p">.</span><span class="na">identify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;General staff&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶è¾“å…¥æµ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">FileOutputStream</span><span class="w"> </span><span class="n">fileOut</span><span class="w"> </span><span class="o">=</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&#34;C:\\Users\\DAN\\Desktop\\Serialize.txt&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// å»ºç«‹å¯¹è±¡è¾“å…¥æµ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="n">fileOut</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//è¾“å‡ºååºåˆ—åŒ–å¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">out</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="n">e</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">out</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">fileOut</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">printf</span><span class="p">(</span><span class="s">&#34;Serialized data is saved in C:\\Users\\DAN\\Desktop\\Serialize.txt&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">i</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œåï¼ŒEmployeeå¯¹è±¡çš„åºåˆ—åŒ–æ•°æ®å°±å­˜å‚¨åˆ°äº†<code>Serialize.txt</code>ä¸­ï¼Œæˆ‘ä»¬æ‰“å¼€çœ‹ä¸€ä¸‹ï¼ˆä½¿ç”¨äºŒè¿›åˆ¶æŸ¥çœ‹å™¨ï¼‰</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230405231806639.png"
	
	
	
	loading="lazy"
	
		alt="image-20230405231806639"
	
	
></p>
<p>å¯ä»¥ä¾ç¨€çœ‹è§ï¼šç±»åï¼Œå±æ€§åç§°ï¼Œå±æ€§ç±»å‹ï¼Œä»¥åŠå±æ€§å¯¹åº”çš„å€¼
å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šå¤§éƒ¨åˆ†çš„ååºåˆ—åŒ–æ•°æ®å‡æ˜¯ä»¥<code>AC ED 00 05 </code>å¼€å¤´çš„</p>
<p>ååºåˆ—åŒ–æ“ä½œå°±æ˜¯ä»å­—èŠ‚æµä¸­æå–å¯¹è±¡ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SerializeDemo2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Employee</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶è¾“å…¥æµ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">FileInputStream</span><span class="w"> </span><span class="n">fileIn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">&#34;C:\\Users\\DAN\\Desktop\\Serialize.txt&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// å»ºç«‹å¯¹è±¡è¾“å…¥æµ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="n">fileIn</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// è¯»å–å¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Employee</span><span class="p">)</span><span class="w"> </span><span class="n">in</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">in</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">fileIn</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">i</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Employee class not found&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">c</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Deserialized Employee...&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Name: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;This is the &#34;</span><span class="o">+</span><span class="n">e</span><span class="p">.</span><span class="na">identify</span><span class="o">+</span><span class="s">&#34; of our company&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œåå¯ä»¥å‘ç°Employeeçš„æ•°æ®å·²ç»è·å–åˆ°äº†ç›®æ ‡ç¨‹åºä¸­å¯¹è±¡eé‡Œ</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230405232844595.png"
	
	
	
	loading="lazy"
	
		alt="image-20230405232844595"
	
	
></p>
<p>ä¸Šè¯‰å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„åºåˆ—åŒ–å‘¨æœŸï¼Œä¸­é—´ä½¿ç”¨æ–‡ä»¶æš‚æ—¶ä½œä¸ºäº†ä¼ è¾“ä»‹è´¨ï¼Œå…¶å®å®é™…åº”ç”¨ä¸­çš„åºåˆ—åŒ–æ— éå°±æ˜¯ä¼ è¾“çš„æ–¹å¼å’Œä¼ è¾“æœºåˆ¶ç¨å¾®å¤æ‚ä¸€ç‚¹</p>
<h4 id="æ€»ç»“åºåˆ—åŒ–å…·ä½“æ­¥éª¤">æ€»ç»“åºåˆ—åŒ–å…·ä½“æ­¥éª¤</h4>
<p>ä»ä¸Šé¢çš„å¯ä»¥çœ‹å‡ºå¯¹è±¡çš„åºåˆ—åŒ–æ­¥éª¤æ˜¯ï¼š</p>
<blockquote>
<ol>
<li>
<p>åˆ›å»ºä¸€ä¸ªå¯¹è±¡è¾“å‡ºæµï¼Œå®ƒå¯ä»¥åŒ…è£…ä¸€ä¸ªå…¶å®ƒç±»å‹çš„ç›®æ ‡è¾“å‡ºæµï¼Œå¦‚æ–‡ä»¶è¾“å‡ºæµï¼š
<code>ObjectOutputStream out = new ObjectOutputStream(new fileOutputStream(â€œD:\\objectfile.objâ€));</code></p>
</li>
<li>
<p>é€šè¿‡å¯¹è±¡è¾“å‡ºæµçš„writeObject()æ–¹æ³•å†™å¯¹è±¡ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="n">out</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="err">â€œ</span><span class="n">Hello</span><span class="err">â€</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">out</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Date</span><span class="p">());</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</blockquote>
<p>å¯¹è±¡çš„ååºåˆ—åŒ–æ­¥éª¤æ˜¯ï¼š</p>
<blockquote>
<ol>
<li>
<p>åˆ›å»ºä¸€ä¸ªå¯¹è±¡è¾“å…¥æµï¼Œå®ƒå¯ä»¥åŒ…è£…ä¸€ä¸ªå…¶å®ƒç±»å‹è¾“å…¥æµï¼Œå¦‚æ–‡ä»¶è¾“å…¥æµï¼š
<code>ObjectInputStream in = new ObjectInputStream(new fileInputStream(â€œD:\\objectfile.objâ€));</code></p>
</li>
<li>
<p>é€šè¿‡å¯¹è±¡è¾“å‡ºæµçš„writeObject()æ–¹æ³•å†™å¯¹è±¡ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="n">String</span><span class="w"> </span><span class="n">obj1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="p">)</span><span class="n">in</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Date</span><span class="w"> </span><span class="n">obj2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Date</span><span class="p">)</span><span class="n">in</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
</blockquote>
<h3 id="åºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„å¿…è¦æ¡ä»¶">åºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„å¿…è¦æ¡ä»¶</h3>
<blockquote>
<ol>
<li>å¿…é¡»æ˜¯åŒåŒ…ï¼ŒåŒåã€‚</li>
<li>serialVersionUIDå¿…é¡»ä¸€è‡´ã€‚æœ‰æ—¶å€™ä¸¤ä¸ªç±»çš„å±æ€§ç¨å¾®ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡å°†æ­¤å±æ€§å†™æ­»å€¼ï¼Œå®ç°åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</li>
</ol>
</blockquote>
<h3 id="åºåˆ—åŒ–ä¸­æ¶‰åŠç»†èŠ‚">åºåˆ—åŒ–ä¸­æ¶‰åŠç»†èŠ‚</h3>
<h4 id="serialversionuid">serialVersionUID</h4>
<h5 id="ç‰ˆæœ¬æ§åˆ¶">ç‰ˆæœ¬æ§åˆ¶</h5>
<p>â€‹	Javaçš„åºåˆ—åŒ–æœºåˆ¶æ˜¯é€šè¿‡åœ¨è¿è¡Œæ—¶åˆ¤æ–­ç±»çš„ serialVersionUID æ¥<strong>éªŒè¯ç‰ˆæœ¬ä¸€è‡´æ€§</strong>çš„ã€‚åœ¨è¿›è¡Œååºåˆ—åŒ–æ—¶ï¼ŒJVMä¼šæŠŠä¼ æ¥çš„å­—èŠ‚æµä¸­çš„serialVersionUIDä¸æœ¬åœ°ç›¸åº”å®ä½“ï¼ˆç±»ï¼‰çš„serialVersionUIDè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒå°±è®¤ä¸ºæ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥è¿›è¡Œååºåˆ—åŒ–ï¼Œå¦åˆ™å°±ä¼šå‡ºç°åºåˆ—åŒ–ç‰ˆæœ¬ä¸ä¸€è‡´çš„å¼‚å¸¸ã€‚</p>
<p>â€‹	è™šæ‹Ÿæœºæ˜¯å¦å…è®¸ååºåˆ—åŒ–ï¼Œä¸ä»…å–å†³äºç±»è·¯å¾„å’ŒåŠŸèƒ½ä»£ç æ˜¯å¦ä¸€è‡´ï¼Œä¸€ä¸ªéå¸¸é‡è¦çš„ä¸€ç‚¹æ˜¯ä¸¤ä¸ªç±»çš„åºåˆ—åŒ– ID æ˜¯å¦ä¸€è‡´ï¼Œä»£ç ä¸­è®¾ç½® serialVersionUID å¯ä»¥åœ¨ç±»ä¸­æ·»åŠ  <code>private static final long serialVersionUID = 1L</code></p>
<p>â€‹	å½“å®ç°java.io.Serializableæ¥å£çš„å®ä½“ï¼ˆç±»ï¼‰æ²¡æœ‰æ˜¾å¼åœ°å®šä¹‰ä¸€ä¸ªåä¸ºserialVersionUIDï¼Œç±»å‹ä¸ºlongçš„å˜é‡æ—¶ï¼ŒJavaåºåˆ—åŒ–æœºåˆ¶ä¼šæ ¹æ®ç¼–è¯‘çš„classè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªserialVersionUIDä½œåºåˆ—åŒ–ç‰ˆæœ¬æ¯”è¾ƒç”¨ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œåªæœ‰åŒä¸€æ¬¡ç¼–è¯‘ç”Ÿæˆçš„classæ‰ä¼šç”Ÿæˆç›¸åŒçš„serialVersionUID</p>
<p>â€‹	å¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›é€šè¿‡ç¼–è¯‘æ¥å¼ºåˆ¶åˆ’åˆ†è½¯ä»¶ç‰ˆæœ¬ï¼Œå³å®ç°åºåˆ—åŒ–æ¥å£çš„å®ä½“èƒ½å¤Ÿå…¼å®¹å…ˆå‰ç‰ˆæœ¬ï¼Œæœªä½œæ›´æ”¹çš„ç±»ï¼Œå°±éœ€è¦æ˜¾å¼åœ°å®šä¹‰ä¸€ä¸ªåä¸ºserialVersionUIDï¼Œç±»å‹ä¸ºlongçš„å˜é‡ï¼Œä¸ä¿®æ”¹è¿™ä¸ªå˜é‡å€¼çš„åºåˆ—åŒ–å®ä½“éƒ½å¯ä»¥ç›¸äº’è¿›è¡Œä¸²è¡ŒåŒ–å’Œåä¸²è¡ŒåŒ–ã€‚</p>
<h5 id="å¸¸è§åœºæ™¯">å¸¸è§åœºæ™¯</h5>
<blockquote>
<p>é—®é¢˜å‡ºç°åœºæ™¯ï¼šä¸¤ä¸ªå®¢æˆ·ç«¯ A å’Œ B è¯•å›¾é€šè¿‡ç½‘ç»œä¼ é€’å¯¹è±¡æ•°æ®ï¼ŒA ç«¯å°†å¯¹è±¡ C åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æ•°æ®å†ä¼ ç»™ Bï¼ŒB ååºåˆ—åŒ–å¾—åˆ° Cã€‚
é—®é¢˜ï¼šC å¯¹è±¡çš„å…¨ç±»è·¯å¾„å‡è®¾ä¸º com.inout.Testï¼Œåœ¨ A å’Œ B ç«¯éƒ½æœ‰è¿™ä¹ˆä¸€ä¸ªç±»æ–‡ä»¶ï¼ŒåŠŸèƒ½ä»£ç å®Œå…¨ä¸€è‡´ã€‚ä¹Ÿéƒ½å®ç°äº† Serializable æ¥å£ï¼Œä½†æ˜¯ååºåˆ—åŒ–æ—¶æ€»æ˜¯æç¤ºä¸æˆåŠŸã€‚
è§£å†³ï¼šç»Ÿä¸€serialVersionUIDçš„å€¼</p>
</blockquote>
<p>è™½ç„¶ä¸¤ä¸ªç±»çš„åŠŸèƒ½ä»£ç å®Œå…¨ä¸€è‡´ï¼Œä½†æ˜¯åºåˆ—åŒ– ID ä¸åŒï¼Œä»–ä»¬æ— æ³•ç›¸äº’åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p>
<h5 id="serialversionuid-ä½¿ç”¨åœºæ™¯">serialVersionUID ä½¿ç”¨åœºæ™¯</h5>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230406001437606.png"
	
	
	
	loading="lazy"
	
		alt="image-20230406001437606"
	
	
></p>
<h4 id="åºåˆ—åŒ–å­˜å‚¨è§„åˆ™">åºåˆ—åŒ–å­˜å‚¨è§„åˆ™</h4>
<ol>
<li>å°†åŒä¸€å¯¹è±¡åºåˆ—åŒ–å¹¶ä¸¤æ¬¡å†™å…¥åŒä¸€æ–‡ä»¶æ—¶</li>
</ol>
<blockquote>
<p>Java åºåˆ—åŒ–æœºåˆ¶ä¸ºäº†èŠ‚çœç£ç›˜ç©ºé—´ï¼Œå…·æœ‰ç‰¹å®šçš„å­˜å‚¨è§„åˆ™ï¼Œå½“å†™å…¥æ–‡ä»¶çš„ä¸ºåŒä¸€å¯¹è±¡æ—¶ï¼Œå¹¶ä¸ä¼šå†å°†å¯¹è±¡çš„å†…å®¹è¿›è¡Œå­˜å‚¨ï¼Œè€Œåªæ˜¯å†æ¬¡å­˜å‚¨ä¸€ä»½å¼•ç”¨ï¼Œæ–‡ä»¶åªä¼šå¢åŠ å°å°çš„å‡ ä¸ªå­—èŠ‚ï¼Œè¿™å‡ ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´å°±æ˜¯æ–°å¢å¼•ç”¨å’Œä¸€äº›æ§åˆ¶ä¿¡æ¯çš„ç©ºé—´ã€‚ååºåˆ—åŒ–æ—¶ï¼Œæ¢å¤å¼•ç”¨å…³ç³»ï¼Œä½¿å¾—ååºåˆ—åŒ–çš„ e1 å’Œ e2 æŒ‡å‘å”¯ä¸€çš„å¯¹è±¡ï¼ŒäºŒè€…ç›¸ç­‰ï¼Œä¸ºå¼•ç”¨å…³ç³»ï¼Œè¯¥å­˜å‚¨è§„åˆ™æå¤§çš„èŠ‚çœäº†å­˜å‚¨ç©ºé—´ã€‚</p>
</blockquote>
<ol start="2">
<li>å°†å¯¹è±¡åºåˆ—åŒ–åå†™å…¥æ–‡ä»¶ï¼Œä¿®æ”¹å¯¹è±¡å‚æ•°å€¼åå†æ¬¡åºåˆ—åŒ–åå†™å…¥åŒä¸€æ–‡ä»¶æ—¶</li>
</ol>
<blockquote>
<p>ç¬¬ä¸€æ¬¡å†™å…¥å¯¹è±¡ä»¥åï¼Œç¬¬äºŒæ¬¡å†è¯•å›¾å†™çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœºæ ¹æ®å¼•ç”¨å…³ç³»çŸ¥é“å·²ç»æœ‰ä¸€ä¸ªç›¸åŒå¯¹è±¡å·²ç»å†™å…¥æ–‡ä»¶ï¼Œå› æ­¤åªä¿å­˜ç¬¬äºŒæ¬¡å†™çš„å¼•ç”¨ï¼Œæ‰€ä»¥è¯»å–æ—¶ï¼Œéƒ½æ˜¯ç¬¬ä¸€æ¬¡ä¿å­˜çš„å¯¹è±¡ã€‚è¯»è€…åœ¨ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶å¤šæ¬¡ writeObject éœ€è¦ç‰¹åˆ«æ³¨æ„è¿™ä¸ªé—®é¢˜ã€‚</p>
</blockquote>
<h4 id="æ›´å¤šç»†èŠ‚">æ›´å¤šç»†èŠ‚</h4>
<p>å…³äº é™æ€å˜é‡åºåˆ—åŒ– ï¼Œçˆ¶ç±»çš„åºåˆ—åŒ–ä¸ Transient å…³é”®å­—ï¼Œå¯¹æ•æ„Ÿå­—æ®µåŠ å¯†ï¼Œç§»æ­¥<a href='#link'>é“¾æ¥3</a></p>
<h3 id="åˆè¯†ååºåˆ—åŒ–æ¼æ´">åˆè¯†ååºåˆ—åŒ–æ¼æ´</h3>
<p>Javaååºåˆ—åŒ–æ—¶ï¼Œä¼šè°ƒç”¨readObjectæ–¹æ³•å°±è¡Œååºåˆ—åŒ–æ“ä½œï¼Œå½“readObjectæ–¹æ³•ä¹¦å†™ä¸å½“æ—¶å°±ä¼šå¼•å‘æ¼æ´</p>
<blockquote>
<p>æœ‰æ—¶ä¹Ÿä¼šä½¿ç”¨readUnshared()æ–¹æ³•æ¥è¯»å–å¯¹è±¡ï¼ŒreadUnshared()ä¸å…è®¸åç»­çš„readObjectå’ŒreadUnsharedè°ƒç”¨å¼•ç”¨è¿™æ¬¡è°ƒç”¨ååºåˆ—åŒ–å¾—åˆ°çš„å¯¹è±¡ï¼Œè€ŒreadObjectè¯»å–çš„å¯¹è±¡å¯ä»¥</p>
</blockquote>
<p>å¤§ä½¬ç»™çš„ä¾‹å­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">test0</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">args</span><span class="o">[]</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">UnsafeClass0</span><span class="w"> </span><span class="n">Unsafe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UnsafeClass0</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Unsafe</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;hacked by ph0rse&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">FileOutputStream</span><span class="w"> </span><span class="n">fos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&#34;C:\\Users\\DAN\\Desktop\\Serialize.txt&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">os</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="n">fos</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//writeObject()æ–¹æ³•å°†Unsafeå¯¹è±¡å†™å…¥objectæ–‡ä»¶</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">os</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="n">Unsafe</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">os</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ä»æ–‡ä»¶ä¸­ååºåˆ—åŒ–objå¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">FileInputStream</span><span class="w"> </span><span class="n">fis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">&#34;C:\\Users\\DAN\\Desktop\\Serialize.txt&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">ois</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="n">fis</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//æ¢å¤å¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">UnsafeClass0</span><span class="w"> </span><span class="n">objectFromDisk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">UnsafeClass0</span><span class="p">)</span><span class="n">ois</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">objectFromDisk</span><span class="p">.</span><span class="na">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ois</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">UnsafeClass0</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//é‡å†™readObject()æ–¹æ³•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">readObject</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">ObjectInputStream</span><span class="w"> </span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//æ‰§è¡Œé»˜è®¤çš„readObject()æ–¹æ³•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">in</span><span class="p">.</span><span class="na">defaultReadObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//æ‰§è¡Œå‘½ä»¤</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Runtime</span><span class="p">.</span><span class="na">getRuntime</span><span class="p">().</span><span class="na">exec</span><span class="p">(</span><span class="s">&#34;calc.exe&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230406190928447.png"
	
	
	
	loading="lazy"
	
		alt="image-20230406190928447"
	
	
></p>
<p>èƒ½å¤ŸæˆåŠŸæ‰§è¡Œåˆ°<code>Runtime.getRuntime().exec(&quot;calc.exe&quot;);</code></p>
<h3 id="å¯¹ååºåˆ—åŒ–çš„ç–‘é—®ä¸åˆ†æ">å¯¹ååºåˆ—åŒ–çš„ç–‘é—®ä¸åˆ†æ</h3>
<p>å…³äºå¤§ä½¬çš„ä»£ç æˆ‘æœ‰å‡ ä¸ªç–‘é—®ï¼š</p>
<ol>
<li>
<p><code>Runtime.getRuntime().exec(&quot;calc.exe&quot;);</code> åªèƒ½å¤Ÿæ§åˆ¶å¼¹å‡ºä¸€ä¸ªè®¡ç®—å™¨ï¼Œæˆ‘èƒ½ä¸èƒ½ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ä»£æ›¿ï¼ˆPHPååºåˆ—åŒ–çš„ç»éªŒå‘Šè¯‰æˆ‘åº”è¯¥æ˜¯å¯è¡Œçš„ï¼‰ï¼Œè¿›è€Œè½»æ¾æ”¹å˜å°†è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Ÿ</p>
</li>
<li>
<p>UnsafeClass0 çš„ readObject æ˜¯ä½•æ—¶è¢«æ‰§è¡Œçš„ï¼Œæ˜¯è¢«è°è°ƒç”¨çš„ï¼ˆå› ä¸ºå½“æˆ‘æŸ¥çœ‹ä¸‹å›¾readObjectæ‰§è¡Œæ—¶çš„æºç æ—¶ <img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230406191631788.png"
	
	
	
	loading="lazy"
	
	
>
è·³è½¬çš„æ˜¯ObjectInputStreamç±»çš„readObject
<img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230406192424409.png"
	
	
	
	loading="lazy"
	
		alt="image-20230406192424409"
	
	
></p>
<p>é‚£ä¹ˆæ˜¯ä»€ä¹ˆæ—¶å€™è°ƒç”¨çš„UnsafeClass0çš„readObjectå‘¢ï¼Ÿï¼ˆå¼ºè½¬ç±»å‹çš„æ—¶å€™å—ï¼Ÿï¼‰</p>
</li>
</ol>
<h4 id="ç¬¬ä¸€ä¸ªé—®é¢˜">ç¬¬ä¸€ä¸ªé—®é¢˜</h4>
<p>å…³äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œåªéœ€è¦å°†æ–­ç‚¹æ‰“åˆ°<code>Runtime.getRuntime().exec(&quot;calc.exe&quot;);</code>ï¼Œç„¶åè§‚å¯Ÿå˜é‡å°±ä¸éš¾çœ‹å‡ºå¯ä»¥ä½¿ç”¨<code>this.command</code>æ‰“åˆ°æˆ‘æƒ³è¦çš„æ•ˆæœï¼Œæ‰€ä»¥ä¿®æ”¹ä»£ç ä¸º</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">test0</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">args</span><span class="o">[]</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">----</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Unsafe</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;hacked by D4n&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Unsafe</span><span class="p">.</span><span class="na">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;notepad&#34;</span><span class="p">;</span><span class="c1">//å¢åŠ </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="o">----</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">UnsafeClass0</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">command</span><span class="p">;</span><span class="w"> </span><span class="c1">//å¢åŠ </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//é‡å†™readObject()æ–¹æ³•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">readObject</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">ObjectInputStream</span><span class="w"> </span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Runtime</span><span class="p">.</span><span class="na">getRuntime</span><span class="p">().</span><span class="na">exec</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">command</span><span class="p">);</span><span class="w"> </span><span class="c1">//ä¿®æ”¹</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æ­¤æ—¶åªéœ€è¦æ§åˆ¶ Unsafe å¯¹è±¡çš„ command å±æ€§å€¼å³å¯æ‰§è¡Œä¸åŒå‘½ä»¤</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230406194620166.png"
	
	
	
	loading="lazy"
	
		alt="image-20230406194620166"
	
	
></p>
<p>ä½†æ˜¯åœ¨åˆ†æç¬¬ä¸€ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œåˆšè¿›å…¥ UnsafeClass0çš„readObject()æ–¹æ³•çš„æ—¶å€™ï¼Œ<code>this</code>è¿˜æ²¡æœ‰è¢«èµ‹å€¼</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230406200057930.png"
	
	
	
	loading="lazy"
	
		alt="image-20230406200057930"
	
	
>
å†æ­¥è¿‡<code>in.defaultReadObject();</code>çš„æ—¶å€™ï¼Œthis çš„å˜é‡å€¼å°±è¢«èµ‹å€¼æˆäº†æˆ‘ä»¬è®¾ç½®çš„æ ·å­ï¼š
<img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230406200546082.png"
	
	
	
	loading="lazy"
	
		alt="image-20230406200546082"
	
	
></p>
<p>æ‰€ä»¥æˆ‘æƒ³è·Ÿè¿›ä¸€ä¸‹ï¼Œ<strong>å…³äº<code>this</code>å˜é‡æ˜¯ä»€ä¹ˆæ—¶å€™æ€ä¹ˆæ ·è¢«èµ‹å€¼çš„</strong>ï¼Œæ‰€ä»¥åº”è¯¥ç€é‡åˆ†æ<code>in.defaultReadObject();</code>å¹²äº†å“ªäº›äº‹ï¼Œå¹¶ä¸”åœ¨æ­¤ä¹‹å‰ï¼Œå…¶ä»–ç›¸å…³ååºåˆ—åŒ–ä»£ç åšçš„äº‹åªæ˜¯åˆ›å»ºå¥½å¯¹è±¡ï¼Œå¼€è¾Ÿå¥½ç©ºé—´ï¼Œæ²¡æœ‰èµ‹å€¼æ“ä½œï¼ˆçŒœæµ‹ï¼‰</p>
<p>æ–°é—®é¢˜ï¼šå…³äº<code>this</code>å˜é‡æ˜¯ä»€ä¹ˆæ—¶å€™æ€ä¹ˆæ ·è¢«èµ‹å€¼çš„ï¼ˆåºåˆ—åŒ–å­—ç¬¦ä¸²æ˜¯æ€ä¹ˆä¸€æ­¥ä¸€æ­¥å˜æˆå¯¹è±¡çš„ï¼‰</p>
<p>è®©æˆ‘ä»¬è¿›å…¥<code>in.defaultReadObject();</code>çœ‹çœ‹
æ²¡æ³•ç›´æ¥æ­¥å…¥ï¼Œæ‰€ä»¥è¦å…ˆ ctrl + B è¿›å…¥æºç åå†æ‰“æ–­ç‚¹
è´´ä¸ªæºç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">defaultReadObject</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">SerialCallbackContext</span><span class="w"> </span><span class="n">ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curContext</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ctx</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NotActiveException</span><span class="p">(</span><span class="s">&#34;not in call to readObject&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">curObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="na">getObj</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectStreamClass</span><span class="w"> </span><span class="n">curDesc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="na">getDesc</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">bin</span><span class="p">.</span><span class="na">setBlockDataMode</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Read fields of the current descriptor into a new FieldValues</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">FieldValues</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FieldValues</span><span class="p">(</span><span class="n">curDesc</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">curObj</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">values</span><span class="p">.</span><span class="na">defaultCheckFieldValues</span><span class="p">(</span><span class="n">curObj</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">values</span><span class="p">.</span><span class="na">defaultSetFieldValues</span><span class="p">(</span><span class="n">curObj</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">bin</span><span class="p">.</span><span class="na">setBlockDataMode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">curDesc</span><span class="p">.</span><span class="na">hasWriteObjectData</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">             * Fix for 4360508: since stream does not contain terminating
</span></span></span><span class="line"><span class="cl"><span class="cm">             * TC_ENDBLOCKDATA tag, set flag so that reading code elsewhere
</span></span></span><span class="line"><span class="cl"><span class="cm">             * knows to simulate end-of-custom-data behavior.
</span></span></span><span class="line"><span class="cl"><span class="cm">             */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">defaultDataEnd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="n">ex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">handles</span><span class="p">.</span><span class="na">lookupException</span><span class="p">(</span><span class="n">passHandle</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ex</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="n">ex</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­ç¬¬ä¸€å¥èµ‹å€¼å®Œæˆåå°±å¯ä»¥çœ‹åˆ°
<img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230406203654282.png"
	
	
	
	loading="lazy"
	
		alt="image-20230406203654282"
	
	
></p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230406203714824.png"
	
	
	
	loading="lazy"
	
		alt="image-20230406203714824"
	
	
></p>
<p>ctxä¸­å·²ç»å­˜æ”¾å¥½äº† UnsafeClass0 ç±»çš„æœªåˆå§‹åŒ–å¯¹è±¡ï¼ˆå®é™…ä»åœ°å€æ¥çœ‹å°±æ˜¯åœ¨<code>in.defaultReadObject();</code>è°ƒç”¨æ—¶çš„&quot;<code>this</code>å˜é‡&quot;ï¼Œä¸ºäº†æ–¹ä¾¿ç§°å‘¼ï¼Œæˆ‘ç§°ä¹‹ä¸º<code>UnsafeClass0--this</code></p>
<p><a href='#SerialCallbackContext'>SerialCallbackContextç±»ç†è§£</a></p>
<p>ä¹‹å</p>
<ul>
<li>
<p><code>Object curObj = ctx.getObj();</code>å°†<code>this</code>åœ°å€å€¼èµ‹å€¼ç»™ curObjï¼Œå³ curObj æ˜¯<code>UnsafeClass0--this</code>çš„å¼•ç”¨</p>
</li>
<li>
<p><code>ObjectStreamClass curDesc = ctx.getDesc();</code>å°†å¯¹è±¡æµèµ‹å€¼ç»™ <code>curDesc</code> æŸ¥çœ‹ curDesc å‘ç°</p>
</li>
</ul>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230406212013679.png"
	
	
	
	loading="lazy"
	
		alt="image-20230406212013679"
	
	
></p>
<p>çŒœæµ‹è¿™é‡Œå­˜æ”¾çš„æ˜¯å¯¹è±¡å±æ€§ä»¥åŠå¯¹åº”å€¼ï¼Œç²—ç•¥æŸ¥çœ‹æ²¡æœ‰æ‰¾åˆ°å…·ä½“æ•°æ®ï¼Œè¿‡</p>
<ul>
<li><code>bin.setBlockDataMode(false);</code> <a href='#link'>BlockDataInputStream</a></li>
</ul>
<p>è¿™å¥çš„ç²—ç•¥ç†è§£å°±æ˜¯ä¸€ä¸ªæµç¨‹æ§åˆ¶ï¼Œæš‚æ—¶æ— å…³æˆ‘éœ€è¦åˆ†æçš„é—®é¢˜ï¼Œè¿‡
<code>é—®é¢˜1-2ï¼šå…³äºthiså˜é‡æ˜¯ä»€ä¹ˆæ—¶å€™æ€ä¹ˆæ ·è¢«èµ‹å€¼çš„</code></p>
<ul>
<li><code>FieldValues values = new FieldValues(curDesc, true);</code></li>
</ul>
<p>è¿™å¥æ‰§è¡Œä¹‹å curObjæš‚æ—¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230408110547997.png"
	
	
	
	loading="lazy"
	
		alt="image-20230408110547997"
	
	
></p>
<p>æ‰€ä»¥å…ˆä¸å»æŸ¥çœ‹FieldValuesåœ¨åšä»€ä¹ˆäº‹æƒ…ï¼Œæ ¹æ®æ„é€ çš„ä¼ å‚çŒœæµ‹å¤§è‡´æ˜¯å¯¹ ç±»æè¿°è¿›è¡Œå¤„ç†</p>
<p>æ¥ä¸‹æ¥è¿›å…¥ ifåˆ¤æ–­</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230408110810865.png"
	
	
	
	loading="lazy"
	
		alt="image-20230408110810865"
	
	
></p>
<p>ï¼ˆ curObj ä¸ä¸ºç©º ï¼‰</p>
<p>æ‰§è¡Œå®Œ<code>values.defaultSetFieldValues(curObj);</code>ä¹‹åï¼Œ<code>curObj</code>çš„å€¼å°±è¢«è®¾ç½®å¥½äº†ï¼Œæœç„¶ä½¿ç”¨åˆ°äº† <code>FieldValues</code>ç±»çš„å¯¹è±¡<code>values</code>ï¼Œè·Ÿè¿›ä¸€ä¸‹<code>values.defaultSetFieldValues(curObj);</code></p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230408115658227.png"
	
	
	
	loading="lazy"
	
		alt="image-20230408115658227"
	
	
></p>
<p><code>defaultSetFieldValues()</code>ç¬¬ä¸€ä¸ª<code>IF</code>åˆ¤æ–­falseï¼Œç¬¬äºŒä¸ªåˆ¤æ–­Tureï¼Œå°†è¦ä¿®æ”¹çš„å¯¹è±¡Obj ä¼ å…¥<code>desc.setObjFieldValues(obj, objValues);</code>ï¼Œè·Ÿè¿›å‰çœ‹çœ‹objValuesæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230408134236702.png"
	
	
	
	loading="lazy"
	
		alt="image-20230408134236702"
	
	
></p>
<p>å‘ç°å€¼å·²ç»è¢«è®¾ç½®å¥½äº†ï¼Œé‚£<code>setObjFieldValues()</code>åšçš„å¯èƒ½åªæ˜¯å¤åˆ¶objValuesé‡Œçš„å€¼ç»™Objï¼Œæ­¤æ—¶<code>UnsafeClass0--this</code>å°±å·²ç»æ”¹å˜äº†</p>
<p>æ–°é—®é¢˜ï¼šobjValues æ˜¯ä»€ä¹ˆæ—¶å€™èµ‹å€¼çš„å‘¢</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230408134544108.png"
	
	
	
	loading="lazy"
	
		alt="image-20230408134544108"
	
	
></p>
<p>è·Ÿè¿›çœ‹ä¸€ä¸‹</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230408134614831.png"
	
	
	
	loading="lazy"
	
		alt="image-20230408134614831"
	
	
></p>
<p>è¿™é‡Œå°±æ˜¯åœ¨å¾€objValuesé‡Œå†™ä¸œè¥¿äº†ï¼Œçœ‹çœ‹readObject0å¦‚ä½•è§£æçš„ï¼ˆf.isUnshared()è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼‰</p>
<p>ç»å†ä¸€ç³»åˆ—ç±»ä¼¼æµç¨‹æ§åˆ¶çš„ä¸œè¥¿ï¼Œæœ€åæ¥åˆ°äº†è¿™</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409131937327.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409131937327"
	
	
></p>
<p>å…ˆçœ‹çœ‹ readString åœ¨å¹²å˜›ï¼š</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409132058351.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409132058351"
	
	
></p>
<p>å…ˆå®Œæ•´æ‰§è¡Œä¸€éï¼Œå‘ç°è·¯è¿‡é‚£æ¡switchè¯­å¥çš„æ—¶å€™ï¼Œstrå°±èƒ½è¢«èµ‹å€¼ä¸ºåºåˆ—åŒ–å­—ç¬¦ä¸²é‡Œçš„å…³é”®å­—</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409132218457.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409132218457"
	
	
></p>
<p>è¯´æ˜readUTFæ˜¯åœ¨ä»åºåˆ—åŒ–å­—ç¬¦ä¸²ä¸­æå–æ•°æ®ï¼Œçœ‹çœ‹ bin æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409132459097.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409132459097"
	
	
></p>
<p>biné‡Œæ˜¯å·²ç»å¤„ç†å¥½çš„åºåˆ—åŒ–å­—ç¬¦ä¸²ç¢ç‰‡ï¼Œé‚£ä¹ˆæ˜¯å“ªä¸ªå‡½æ•°åœ¨å¤„ç†æ•´ä¸ªåºåˆ—åŒ–å­—ç¬¦ä¸²å‘¢ï¼Ÿï¼ˆæ‰¾åˆ°ç»™binèµ‹å€¼çš„è¯­å¥ï¼‰</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409132855969.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409132855969"
	
	
></p>
<p>ç›´æ¥çœ‹çœ‹ä¸å‡ºä»€ä¹ˆç«¯å€ªï¼Œçœ‹æ¥åªæœ‰è·Ÿç€æ–­ç‚¹èµ°ä¸€æ¬¡</p>
<p>èµ°ä¸€æ¬¡ï¼Œæ²¡æœ‰æ‰¾åˆ°ç»™bin.cbufèµ‹å€¼çš„åœ°æ–¹ï¼Œä½†æ˜¯æœ‰æ„å¤–æ”¶è·ï¼š</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409134155919.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409134155919"
	
	
></p>
<p>è¿™ä¸å°±æ˜¯å¦¥å¦¥çš„å’±è¦æ‰¾çš„ä¸œè¥¿å—ï¼Œsigsçš„æ¥æºæ‰¾åˆ°äº†ï¼Œæ€ä¹ˆèµ‹å€¼ç»™bin.cbufå°±æš‚æ—¶ä¸æ·±ç©¶äº†ï¼ˆæ¯•ç«Ÿå…¶å®å¾ˆæƒ³çœ‹åˆ°çš„å°±æ˜¯å¦‚ä½•ä»åºåˆ—åŒ–ä¸­æå–å‡ºä¹‹å‰å†™å…¥çš„åºåˆ—åŒ–æ•°æ®ï¼‰</p>
<p>è¿™é‡Œçš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409134546319.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409134546319"
	
	
></p>
<p>æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ª<code>sigs</code>èƒ½åœ¨å“ªäº›åœ°æ–¹è¢«èµ‹å€¼</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409134655607.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409134655607"
	
	
></p>
<p>çœ‹æ¥å°±åªæœ‰<code>sigs[j++] = f.getName();sigs[j++] = f.getSignature();</code>è¿™ä¸¤ä¸ªåœ°æ–¹ï¼Œåº·åº·<code>f.getName()å’Œf.getSignature()</code>åœ¨å¹²å˜›</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409135544572.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409135544572"
	
	
></p>
<p>ï¼Œï¼Œï¼Œï¼Œä»–æ²¡å¹²å˜›ï¼Œæ‰€ä»¥çœ‹çœ‹ f æ€ä¹ˆæ¥çš„ ï¼ˆå¯æ¶ï¼Œå¯¹ get set ç±»å‡½æ•°è¿˜æ˜¯ä¸å¤Ÿæ•æ„Ÿï¼Œä½†æ˜¯ä¹Ÿç®—ä¸¥è°¨ï¼Œï¼Œï¼Œï¼Œï¼‰</p>
<p><code>ObjectStreamField f = fields[i];</code>ï¼Œæ‰€ä»¥å¾—çœ‹çœ‹<code>fields</code>æ˜¯æ€ä¹ˆæ¥çš„ <a href="#Field">Fieldç±»è¯´æ˜</a></p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409140442924.png"
	
	
	
	loading="lazy"
	
		alt="1"
	
	
></p>
<p>è¿™é‡Œçš„<code>fields</code>æ˜¯ç›´æ¥ä¼ å‚è¿›æ¥çš„ï¼Œè€Œä¸”è¿™é‡Œæ˜¯<code>FieldReflectorKey</code>ç±»çš„æ„é€ å‡½æ•°ï¼Œåº·åº·è°åœ¨<code>new</code>å‘¢ï¼Ÿ</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409140622482.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409140622482"
	
	
></p>
<p>è¿™é‡Œçš„<code>fields</code>å“ªæ¥çš„ï¼Ÿ</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409140702701.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409140702701"
	
	
></p>
<p>è¿™é‡Œçš„<code>fields</code>ä¹Ÿæ˜¯ä¼ å‚ï¼Œå†è·Ÿï¼</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409140942754.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409140942754"
	
	
></p>
<p>è¿™é‡Œå‘ç°ç»™<code>fields</code>èµ‹å€¼çš„åœ°æ–¹æœ‰äº›å¤šï¼Œé‡æ–°debugçœ‹çœ‹</p>
<p>å¤šæ¬¡å°è¯•ï¼Œå‘ç°èµ‹å€¼çš„åœ°æ–¹åœ¨ï¼š</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409141939691.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409141939691"
	
	
></p>
<p>å†è·¯è¿‡å°±å·²ç»å¤„ç†å¥½å•¦ï¼Œè·Ÿè¿›ï¼š</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409142432930.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409142432930"
	
	
></p>
<p>è¿™æ­¥èµ‹å€¼ï¼Œè·Ÿè¿›ï¼š</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409142534384.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409142534384"
	
	
></p>
<p>è¿™æ­¥åˆæ˜¯å·²ç»è¢«å¤„ç†å¥½äº†ï¼ˆæ€ä¹ˆè¿™ä¹ˆå¤šæ£€æµ‹ï¼‰é‡æ–°åœ¨<code>Field[] clFields = cl.getDeclaredFields();</code>å¤„æ‰“ä¸ªæ–­ç‚¹ï¼Œé‡æ–°çœ‹çœ‹</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409142800915.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409142800915"
	
	
></p>
<p>åˆæ˜¯è¢«å¤„ç†å¥½çš„ï¼Œé‡æ–°è·Ÿè¸ª<code>rd</code></p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409142951507.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409142951507"
	
	
></p>
<p>åˆï¼Œè°ƒç”¨çš„æ—¶å€™å·²ç»æœ‰äº†ï¼Œï¼Œï¼Œç»è¿‡åå¤è°ƒè¯•ï¼Œç»ˆäºæ‰¾åˆ°ä¸€ä¸ªåƒæ˜¯æœ€åˆå¤„ç†çš„å‡½æ•°</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409143450392.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409143450392"
	
	
></p>
<p>ä½†æ˜¯å·²ç»æ²¡æœ‰åŠæ³•è¿½è¸ªäº†ï¼Œ<code>getDeclaredFields0(publicOnly)</code>ç²—ç•¥ç†è§£ï¼š</p>
<blockquote>
<p>â€‹	getDeclaredFields0() æ˜¯ Java ä¸­ Class ç±»çš„ä¸€ä¸ªæœ¬åœ°æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯ä½¿ç”¨ C æˆ– C++ ç­‰æœ¬åœ°è¯­è¨€ç¼–å†™çš„ã€‚æœ¬åœ°æ–¹æ³•æ˜¯ Java ä¸­ä¸åº•å±‚æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶äº¤äº’çš„ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥è®© Java ç¨‹åºèƒ½å¤Ÿè°ƒç”¨åº•å±‚æ“ä½œç³»ç»Ÿæä¾›çš„æœ¬åœ°åŠŸèƒ½å’Œèµ„æºã€‚
â€‹	Java è¯­è¨€æœ¬èº«å¹¶ä¸æ”¯æŒåº•å±‚æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶çš„è®¿é—®ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨æœ¬åœ°æ–¹æ³•æ¥æ‰©å±• Java çš„èƒ½åŠ›ã€‚æœ¬åœ°æ–¹æ³•é€šå¸¸ç”±æœ¬åœ°åº“ï¼ˆnative libraryï¼‰å®ç°ï¼Œæœ¬åœ°åº“æ˜¯ä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“ï¼ˆ.dll æˆ– .so æ–‡ä»¶ï¼‰ï¼Œå…¶ä¸­åŒ…å«äº†æœ¬åœ°æ–¹æ³•çš„å®ç°ã€‚åœ¨ Java ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ System.loadLibrary() æˆ– System.load() æ–¹æ³•æ¥åŠ è½½æœ¬åœ°åº“ï¼Œä»è€Œä½¿ Java ç¨‹åºèƒ½å¤Ÿè°ƒç”¨æœ¬åœ°æ–¹æ³•ã€‚
â€‹	åœ¨ Class ç±»ä¸­ï¼ŒgetDeclaredFields0() æ–¹æ³•æ˜¯ä½¿ç”¨æœ¬åœ°è¯­è¨€ç¼–å†™çš„æœ¬åœ°æ–¹æ³•ï¼Œå®ƒå®ç°äº†è·å–ä¸€ä¸ªç±»ä¸­å£°æ˜çš„æ‰€æœ‰æˆå‘˜å˜é‡çš„åŠŸèƒ½ã€‚å½“ Java ç¨‹åºè°ƒç”¨ getDeclaredFields() æ–¹æ³•æ—¶ï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨äº† getDeclaredFields0() æ–¹æ³•çš„ Java å°è£…ï¼Œè€Œè¿™ä¸ªå°è£…æ–¹æ³•ä¼šé€šè¿‡ JNIï¼ˆJava Native Interfaceï¼‰æœºåˆ¶æ¥è°ƒç”¨æœ¬åœ°æ–¹æ³•çš„å®ç°ã€‚</p>
</blockquote>
<p>ä½†æ˜¯<code>getDeclaredFields0(publicOnly)</code>åªæ˜¯è·å¾—äº†ç±»é‡Œå£°æ˜çš„æˆå‘˜å˜é‡ï¼Œå¹¶æ²¡æœ‰ç»™å…¶èµ‹å€¼ï¼Œå…·ä½“çš„å€¼æ˜¯ä»€ä¹ˆæ—¶å€™æŠ½å–å‡ºæ¥çš„ï¼Ÿ</p>
<p>é‡æ–°è°ƒæ•´æ€è·¯ï¼Œä¸€è·¯debugå¯»æ‰¾ï¼Œæ‰¾åˆ°äº†readUTFBodyï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">readUTFBody</span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">utflen</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">StringBuilder</span><span class="w"> </span><span class="n">sbuf</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">utflen</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">utflen</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">MAX_VALUE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// a reasonable initial capacity based on the UTF length</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">initialCapacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">utflen</span><span class="p">,</span><span class="w"> </span><span class="n">0xFFFF</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">sbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringBuilder</span><span class="p">(</span><span class="n">initialCapacity</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">sbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringBuilder</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">blkmode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">utflen</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">avail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">avail</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">3</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="w"> </span><span class="n">avail</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">utflen</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="n">utflen</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">readUTFSpan</span><span class="p">(</span><span class="n">sbuf</span><span class="p">,</span><span class="w"> </span><span class="n">utflen</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">blkmode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                        </span><span class="c1">// near block boundary, read one byte at a time</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                        </span><span class="n">utflen</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">readUTFChar</span><span class="p">(</span><span class="n">sbuf</span><span class="p">,</span><span class="w"> </span><span class="n">utflen</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                        </span><span class="c1">// shift and refill buffer manually</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">avail</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                            </span><span class="n">System</span><span class="p">.</span><span class="na">arraycopy</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">0</span><span class="p">,</span><span class="w"> </span><span class="n">avail</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                        </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                        </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">min</span><span class="p">(</span><span class="n">MAX_BLOCK_SIZE</span><span class="p">,</span><span class="w"> </span><span class="n">utflen</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                        </span><span class="n">in</span><span class="p">.</span><span class="na">readFully</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">avail</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">avail</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">sbuf</span><span class="p">.</span><span class="na">toString</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ç²—ç•¥ç†è§£ä¸€ä¸‹ï¼š</p>
<blockquote>
<p>readUTFBodyï¼Œå®ƒçš„ä½œç”¨æ˜¯ä»è¾“å…¥æµä¸­è¯»å–æŒ‡å®šé•¿åº¦çš„UTF-8å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºJavaçš„Stringç±»å‹è¿”å›ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œä»£ç çš„ä¸»è¦é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>æ ¹æ®æŒ‡å®šçš„ <code>utflen</code>ï¼ˆè¡¨ç¤ºUTF-8ç¼–ç çš„å­—èŠ‚æ•°ï¼‰åˆ›å»ºä¸€ä¸ª <code>StringBuilder</code> å¯¹è±¡ <code>sbuf</code>ï¼Œä½œä¸ºå­˜å‚¨è§£ç åå­—ç¬¦ä¸²çš„ç¼“å†²åŒºã€‚å¦‚æœ <code>utflen</code> åœ¨ 0 å’Œ <code>Integer.MAX_VALUE</code> ä¹‹é—´ï¼Œåˆ™è®¾ç½® <code>sbuf</code> çš„åˆå§‹å®¹é‡ä¸º <code>utflen</code> å’Œ 0xFFFF ä¹‹é—´çš„è¾ƒå°å€¼ï¼Œä»¥æé«˜æ€§èƒ½ã€‚</p>
</li>
<li>
<p>å¦‚æœå½“å‰è¾“å…¥æµä¸å¤„äºå—æ¨¡å¼ï¼Œåˆ™å°†è¾“å…¥æµçš„ <code>pos</code> å’Œ <code>end</code> åˆ†åˆ«è®¾ç½®ä¸º0ï¼Œè¡¨ç¤ºå½“å‰æ²¡æœ‰è¯»å–ä»»ä½•æ•°æ®ã€‚</p>
</li>
<li>
<p>è¿›å…¥ä¸€ä¸ªwhileå¾ªç¯ï¼Œå¾ªç¯æ¡ä»¶æ˜¯utflenå¤§äº0ï¼Œå³è¿˜éœ€è¦ç»§ç»­è¯»å–å­—ç¬¦ä¸²ã€‚</p>
</li>
<li>
<p>åœ¨æ¯æ¬¡å¾ªç¯ä¸­ï¼Œæ ¹æ®è¾“å…¥æµçš„ <code>pos</code> å’Œ <code>end</code> è®¡ç®—å½“å‰å¯ç”¨çš„å­—èŠ‚æ•° <code>avail</code>ã€‚å¦‚æœ <code>avail</code> å¤§äºç­‰äº3ï¼Œæˆ–è€…ä¸ <code>utflen</code> ç›¸ç­‰ï¼Œåˆ™è°ƒç”¨ <code>readUTFSpan()</code> æ–¹æ³•è¯»å–ä¸€æ®µè¿ç»­çš„å­—èŠ‚ï¼Œå¹¶å°†å…¶è§£ç æˆå­—ç¬¦ä¸²ï¼Œå°†è§£ç åçš„å­—ç¬¦ä¸²è¿½åŠ åˆ° <code>sbuf</code> ä¸­ï¼Œå¹¶å°†å·²ç»è¯»å–çš„å­—èŠ‚æ•°ä» <code>utflen</code> ä¸­å‡å»ã€‚</p>
</li>
<li>
<p>å¦‚æœ<code>avail</code>å°äº3ä¸”ä¸ç­‰äº<code> utflen</code> ï¼Œåˆ™åˆ†ä¸¤ç§æƒ…å†µå¤„ç†ï¼š</p>
<ul>
<li>å¦‚æœå½“å‰è¾“å…¥æµå¤„äºå—æ¨¡å¼ï¼Œåˆ™è¯´æ˜æ¥è¿‘å—è¾¹ç•Œï¼Œä¾¿é€ä¸ªå­—èŠ‚åœ°è¯»å–å‰©ä½™å­—èŠ‚ï¼Œè°ƒç”¨readUTFCharå‡½æ•°è¯»å–ä¸€ä¸ªå­—ç¬¦ï¼Œå°†è§£ç åçš„å­—ç¬¦è¿½åŠ åˆ° <code>sbuf</code> ä¸­ï¼Œå¹¶å°†å·²ç»è¯»å–çš„å­—èŠ‚æ•°ä» <code>utflen</code> ä¸­å‡å»ã€‚</li>
<li>å¦‚æœå½“å‰è¾“å…¥æµä¸å¤„äºå—æ¨¡å¼ï¼Œåˆ™æ‰‹åŠ¨ç§»åŠ¨å‰©ä½™å­—èŠ‚åˆ°ç¼“å†²åŒºçš„å¼€å¤´ï¼Œé‡æ–°å¡«å……ç¼“å†²åŒºï¼Œå°† <code>pos</code> å’Œ <code>end</code> åˆ†åˆ«è®¾ç½®ä¸º0å’Œæ–°çš„å¯è¯»å–å­—èŠ‚æ•°ï¼Œç„¶åç»§ç»­å¾ªç¯è¯»å–æ•°æ®ã€‚</li>
</ul>
</li>
<li>
<p>åœ¨whileå¾ªç¯ç»“æŸåï¼Œè¿”å› <code>sbuf</code> ç¼“å†²åŒºä¸­å­˜å‚¨çš„è§£ç åçš„å­—ç¬¦ä¸²ï¼Œå³è¯»å–çš„UTF-8å­—ç¬¦ä¸²ã€‚</p>
</li>
</ol>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¯»å–å­—èŠ‚å’Œè§£ç å­—ç¬¦ä¸²çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°ä»»ä½•é”™è¯¯ï¼ˆå¦‚è¯»å–å­—èŠ‚å¤±è´¥ã€è§£ç å¤±è´¥ç­‰ï¼‰ï¼Œåˆ™ä¼šæŠ›å‡º <code>IOException</code> æˆ–<code>UTFDataFormatException</code> å¼‚å¸¸ã€‚</p>
</blockquote>
<p>ç®€å•æ¥è¯´å°±æ˜¯æŠŠå­—èŠ‚æµè½¬æ¢æˆå­—ç¬¦ä¸²çš„å‡½æ•°ï¼Œå­—èŠ‚æµæ˜¯ä»<code>buff</code>å˜é‡é‡Œé¢è¯»å–çš„ï¼Œ<code>buff</code>æ˜¯ä»€ä¹ˆæ—¶å€™èµ‹å€¼çš„å‘¢ <code>in.readFully()</code></p>
<p>æ‰€ä»¥å®Œæ•´åºåˆ—åŒ–æ•°æ®åˆ°å¯¹è±¡çš„è¿‡ç¨‹ï¼š</p>
<p><code>in.readFully()è¯»å…¥æŒ‡å®šä½ç½®å’Œå­—æ•°çš„å­—èŠ‚åˆ°buffï¼ŒreadUTFBody()å’ŒreadUTFSpan()æ§åˆ¶buffå­—èŠ‚æµçš„åŒæ—¶è¯»å‡ºé‡Œé¢çš„å±æ€§åä¸å…¶å¯¹åº”å±æ€§ï¼Œè¿”å›åˆ°ObjectStreamClassé‡Œç»„è£…åˆ°fieldsé‡Œï¼Œç„¶åè¿”å›å€¼ä¸€è·¯è¿”å›åˆ°ObjectInputStreamç±»é‡Œï¼Œè¿™ä¹‹å‰éƒ½æ˜¯ä¸ºäº†ç”Ÿæˆå¯¹ç±»çš„ç»†èŠ‚æè¿°â€œdesâ€ï¼šç±»åï¼Œå±æ€§åï¼Œå±æ€§ç±»å‹ï¼Œåšå¥½äº†å¯¹è±¡çš„æ¡†æ¶åæœ€åå†ObjectStreamClassé‡Œå¯¹ç±»è¿›è¡Œäº†å®ä¾‹åŒ–</code></p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409165521275.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409165521275"
	
	
></p>
<p>è°ƒç”¨çš„ä¹Ÿæ˜¯åå°„ç±»çš„å®ä¾‹å‡½æ•°ï¼š</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409165614326.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409165614326"
	
	
></p>
<p><code>æœ€ååœ¨ObjectInputStreamé‡Œobjæ¥æ”¶åˆ°äº†è¿”å›çš„å®ä¾‹åŒ–å¥½çš„ç©ºçš„UnsafeClass0å¯¹è±¡</code></p>
<p>æ­¤æ—¶å†æ¬¡è°ƒè¯•å‘ç°å›åˆ°äº†æˆ‘ä»¬å®šä¹‰çš„ç±»é‡Œé¢</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409171058655.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409171058655"
	
	
></p>
<p>æ‰€ä»¥å¯ä»¥ç¡®å®šäº†ï¼Œåœ¨æ‰§è¡Œ<code>UnsafeClass0.readObject</code>ä¸­çš„<code>in.defaultReadObject();</code>ä¹‹å‰ï¼Œéƒ½åªæ˜¯åœ¨åˆå§‹åŒ–ä¸€ä¸ª<code>UnsafeClass0</code>ç±»çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œæ­¤æ—¶å†è¿›å…¥<code>defaultReadObject</code>è¿›è¡Œå€¼çš„èµ‹</p>
<p><code>defultReadObject</code>åšçš„æ˜¯å°±æ˜¯æ‹¿åˆ°å½“å‰éœ€è¦èµ‹å€¼çš„Obj<code>curObj</code>å’Œå½“å‰å¤„ç†å¥½çš„å¯¹è¯¥Objçš„æè¿°<code>curDesc</code>ç„¶ååœ¨åˆ›å»º<code>FieldValuse</code>å¯¹è±¡åˆå§‹åŒ–</p>
<p>è¿™æ¬¡åˆå§‹åŒ–ä¹Ÿæ˜¯é€šè¿‡è°ƒç”¨</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230409171439967.png"
	
	
	
	loading="lazy"
	
		alt="image-20230409171439967"
	
	
></p>
<p><code>readUTF</code>ç­‰ä¸€ç³»åˆ—æ–¹æ³•å¯¹åºåˆ—åŒ–å­—èŠ‚è¿›è¡Œå¤„ç†å¾—åˆ°å…·ä½“å€¼</p>
<p>é€šè¿‡<code>curDesc</code>æ‹¿åˆ°è¯¥èµ‹çš„å…·ä½“å€¼ç»™<code>curObj</code>èµ‹å€¼ï¼Œå³å¯å®Œæˆååºåˆ—åŒ–</p>
<h4 id="ç¬¬äºŒä¸ªé—®é¢˜">ç¬¬äºŒä¸ªé—®é¢˜</h4>
<p>UnsafeClass0 çš„ readObject æ˜¯æœ‰å‚æ•°çš„ï¼Œæ‰€ä»¥<code>UnsafeClass0 objectFromDisk = (UnsafeClass0)ois.readObject();</code>è‚¯å®šä¸æ˜¯ç›´æ¥è°ƒç”¨ UnsafeClass0 ä¸­çš„ readObjectï¼Œé‚£æ˜¯è°è°ƒç”¨çš„å‘¢ï¼Ÿå¯ä»¥é€šè¿‡å‡½æ•°æ ˆè§‚å¯Ÿ</p>
<blockquote>
<p>è°ƒç”¨æƒ…å†µä½¿ç”¨  =&gt;  è¡¨ç¤º</p>
<p>main =&gt; ObjectInputStream.readObject =&gt; ObjectInputStream.readObject0 =&gt; ObjectInputStream.readOrdinaryObject =&gt; ObjectInputStream.readSerialData =&gt; ObjectStreamClass.invokeReadObject =&gt; <strong>Method.invoke</strong> =&gt; ç„¶åä¸€å †çœ‹ä¸æ‡‚çš„ =&gt; UnsafeClass0.readObject</p>
</blockquote>
<p>çœ‹åˆ°ç†Ÿæ‚‰çš„ <code>Method.invoke</code>äº†å—ï¼Œï¼ˆå¥½å§å…¶å®ä¹Ÿä¸æ˜¯å¾ˆç†Ÿï¼‰Javaä¹Ÿæ˜¯é€šè¿‡åå°„æ¥è°ƒç”¨ <code>UnsafeClass0.readObject</code></p>
<p>è‡³æ­¤ï¼Œååºåˆ—åŒ–çš„åˆæ­¥ç†è§£å°±å‘Šä¸€æ®µè½äº†</p>
<h3 id="popé“¾">POPé“¾</h3>
<p>â€‹	POPï¼ˆProperty-Oriented Programmingï¼‰ç›´è¯‘çš„è¯å°±æ˜¯é¢å‘å±æ€§ç¼–ç¨‹ï¼Œå¦‚æœå­¦è¿‡äºŒè¿›åˆ¶çš„è¯å°±å¯ä»¥ç±»æ¯”ä¸€ä¸‹ROPã€‚<code> POP é“¾çš„æ„é€ åˆ™æ˜¯å¯»æ‰¾ç¨‹åºå½“å‰ç¯å¢ƒä¸­å·²ç»å®šä¹‰äº†æˆ–è€…èƒ½å¤ŸåŠ¨æ€åŠ è½½çš„å¯¹è±¡ä¸­çš„å±æ€§ï¼ˆå‡½æ•°æ–¹æ³•ï¼‰ï¼Œå°†ä¸€äº›å¯èƒ½çš„è°ƒç”¨ç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªå®Œæ•´çš„ã€å…·æœ‰ç›®çš„æ€§çš„æ“ä½œ</code>ã€‚</p>
<p>â€‹	ä½œè€…ä¸ªäººç†è§£ï¼šä»å¯æ§çš„è¾“å…¥ç‚¹åˆ°æœ€ç»ˆçš„ä»£ç æ‰§è¡Œç‚¹ä¸€èˆ¬ä¸æ˜¯ç›´è¾¾çš„ï¼Œæ­¤æ—¶éœ€è¦ç²¾å¿ƒæ„é€ æˆ–è€…å¯»æ‰¾ä¸€äº›èƒ½å¤Ÿåœ¨ä¸åŒå¯¹è±¡ï¼Œæ–¹æ³•ä¹‹é—´è·³è½¬çš„è·³æ¿å‡½æ•°æˆ–è€…è·³æ¿å¯¹è±¡ã€‚ä¸”è¿™äº›è·³æ¿æœ¬èº«å¯èƒ½å¹¶ä¸æ˜¯ç”¨ä½œè·³æ¿ç”¨é€”ï¼Œæœ‰æ—¶å€™çš„è·³æ¿å¯èƒ½åªæ˜¯åˆ©ç”¨äº†ç›¸å…³å‡½æ•°çš„è®¾è®¡æœºåˆ¶ï¼ˆä¾‹å¦‚PHPä¸­è®¿é—®ä¸€ä¸ªå¯¹è±¡ä¸å­˜åœ¨çš„æ–¹æ³•æ—¶ä¼šè¢«è°ƒç”¨è¯¥å¯¹è±¡çš„<code>__class__</code>é­”æœ¯æ–¹æ³•ï¼‰</p>
<p>â€‹	åœ¨ä¹‹åçš„æ–‡ç« ä¸­ï¼Œä¼šæ·±åˆ»çš„é¢†æ‚Ÿåˆ°POPçš„ç²¾é«“</p>
<h3 id="åå°„">åå°„</h3>
<p>è¦çŸ¥é“ä»€ä¹ˆæ˜¯åå°„ï¼Œé¦–å…ˆå°±è¦çŸ¥é“&quot;æ­£å°„&quot;æ˜¯æ€ä¹ˆæ ·çš„</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨æŸä¸ªç±»å‰ï¼Œæˆ‘ä»¬æ˜¯çŸ¥é“è¿™ä¸ªç±»çš„ç±»åçš„ï¼Œæ¯”å¦‚å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="n">Apple</span><span class="w"> </span><span class="n">apple</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Apple</span><span class="p">();</span><span class="w"> </span><span class="c1">//ç›´æ¥åˆå§‹åŒ–ï¼Œã€Œæ­£å°„ã€</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">apple</span><span class="p">.</span><span class="na">setPrice</span><span class="p">(</span><span class="n">4</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ç±»ä¼¼è¿™ç§çŸ¥é“è¦åˆå§‹åŒ–ç±»çš„ç±»åï¼Œå¹¶å°†å…¶å†™æ­»åœ¨ä»£ç ä¸­ï¼Œè¿è¡Œæ—¶æ— æ³•æ›´æ”¹çš„ï¼Œå°±å¯ä»¥ç§°ä¹‹ä¸ºæ­£å°„</p>
<p>åå°„çš„è¯å°±æ˜¯å’Œæ­£å°„åç€æ¥ï¼Œç¨‹åºè¿è¡Œèµ·æ¥ä¹‹å‰ï¼Œæˆ‘å¹¶ä¸çŸ¥é“æˆ‘éœ€è¦åˆå§‹åŒ–ç±»çš„ç±»åå«ä»€ä¹ˆï¼Œæ‰€ä»¥æˆ‘æ— æ³•åœ¨ä»£ç ä¸­å†™æ­»</p>
<p>ä¸¾ä¸€ä¸ªä¸æ°å½“ä½†æ˜¯å¾ˆåˆé€‚çš„éœ€æ±‚ï¼šæˆ‘éœ€è¦ä½¿ç”¨Javaå†™ä¸€ä¸ªç¨‹åºï¼Œåœ¨å…¶è¿è¡ŒæœŸé—´ï¼Œæˆ‘æ¯è¾“å…¥ä¸€ä¸ªç±»çš„åå­—ï¼ŒJavaç¨‹åºå°±å¸®æˆ‘å®ä¾‹åŒ–å¥½è¿™ä¸ªç±»å¯¹è±¡ï¼Œå°†å…¶åºåˆ—åŒ–æˆå­—èŠ‚æµï¼Œå¹¶åˆ›å»ºå†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œè·¯å¾„å’Œæˆ‘çš„å·¥ä½œè·¯å¾„ç›¸åŒï¼Œæ–‡ä»¶åå°±æ˜¯æˆ‘è¾“å…¥çš„ç±»çš„åå­—ï¼Œå…¶ä¸­å¯¹è±¡çš„æ•´å½¢å±æ€§æŒ‰ç…§å˜é‡åçš„å­—æ¯æ•°èµ‹å€¼ï¼Œå…¶ä»–ç±»å‹çš„å±æ€§èµ‹å€¼ä¸º Null</p>
<p>å¦‚æœæ²¡æœ‰<code>åœ¨å…¶è¿è¡ŒæœŸé—´</code>è¿™ä¸ªå‰ææ¡ä»¶çš„è¯ï¼Œå®ç°è¿™ä¸ªéœ€æ±‚æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ new å‡ºå¯¹è±¡æ¥ï¼Œç„¶åæ•°å‡ºå˜é‡åå­—æ¯æ•°ï¼Œç„¶ååºåˆ—åŒ–å¥½æ”¾å…¥æ–‡ä»¶ä¸­</p>
<blockquote>
<p>â€‹	åå°„æ˜¯Javaçš„ç‰¹å¾ä¹‹ä¸€ï¼Œæ˜¯ä¸€ç§é—´æ¥æ“ä½œç›®æ ‡å¯¹è±¡çš„æœºåˆ¶ï¼Œæ ¸å¿ƒæ˜¯JVMåœ¨è¿è¡ŒçŠ¶æ€çš„æ—¶å€™æ‰åŠ¨æ€åŠ è½½ç±»ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»éƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¹¶ä¸”å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„æ–¹æ³•/è®¿é—®å±æ€§ã€‚è¿™ç§åŠ¨æ€è·å–ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„åŠŸèƒ½æˆä¸ºJavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚é€šè¿‡ä½¿ç”¨åå°„æˆ‘ä»¬ä¸ä»…å¯ä»¥è·å–åˆ°ä»»ä½•ç±»çš„æˆå‘˜æ–¹æ³•(Methods)ã€æˆå‘˜å˜é‡(Fields)ã€æ„é€ æ–¹æ³•(Constructors)ç­‰ä¿¡æ¯ï¼Œè¿˜å¯ä»¥åŠ¨æ€åˆ›å»ºJavaç±»å®ä¾‹ã€è°ƒç”¨ä»»æ„çš„ç±»æ–¹æ³•ã€ä¿®æ”¹ä»»æ„çš„ç±»æˆå‘˜å˜é‡å€¼ç­‰ã€‚</p>
</blockquote>
<p>ä½†æ˜¯åœ¨è¿è¡ŒæœŸé—´çš„è¯ï¼Œåªèƒ½ä½¿ç”¨åˆ°åå°„äº†ï¼ˆä¸¾ä¾‹åˆ°æ­¤ä¸ºæ­¢ï¼Œæ¥ä¸‹æ¥çš„ä»£ç ä¸è§£å†³ä¸Šè¯‰éœ€æ±‚ï¼‰</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JDK æä¾›çš„åå°„ API è¿›è¡Œåå°„è°ƒç”¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="n">Class</span><span class="w"> </span><span class="n">clz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;com.dan.Apple&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clz</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;setPrice&#34;</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clz</span><span class="p">.</span><span class="na">getConstructor</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Object</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">constructor</span><span class="p">.</span><span class="na">newInstance</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">method</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">object</span><span class="p">,</span><span class="w"> </span><span class="n">4</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸¤æ®µä»£ç çš„èƒ½å®ç°ç›¸åŒçš„ä½œç”¨ï¼Œä½†æ˜¯ç¬¬äºŒæ®µä»£ç è·å–ç±»å®ä¾‹åŒ–å¯¹è±¡æ—¶ï¼Œç±»åæ˜¯é€šè¿‡å­—ç¬¦ä¸²è·å–çš„</p>
<blockquote>
<p>åå°„å°±æ˜¯åœ¨è¿è¡Œæ—¶æ‰çŸ¥é“è¦æ“ä½œçš„ç±»æ˜¯ä»€ä¹ˆï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¿è¡Œæ—¶è·å–ç±»çš„å®Œæ•´æ„é€ ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„æ–¹æ³•ã€‚</p>
</blockquote>
<p>æ¥ä¸‹æ¥å…ˆçœ‹çœ‹ä½¿ç”¨åå°„æˆ‘ä»¬èƒ½ç®€å•å¹²äº›ä»€ä¹ˆï¼Œæ€ä¹ˆä½¿ç”¨åå°„</p>
<h4 id="è·å–classå¯¹è±¡">è·å–Classå¯¹è±¡</h4>
<p><code>åœ¨åå°„ä¸­ï¼Œè¦è·å–ä¸€ä¸ªç±»æˆ–è°ƒç”¨ä¸€ä¸ªç±»çš„æ–¹æ³•ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦è·å–åˆ°è¯¥ç±»çš„ Class å¯¹è±¡ã€‚</code></p>
<p>æœ‰ä¸‰ç§æ–¹æ³•</p>
<p>ç¬¬ä¸€ç§ï¼Œä½¿ç”¨ Class.forName é™æ€æ–¹æ³•ã€‚å½“ä½ çŸ¥é“è¯¥ç±»çš„å…¨è·¯å¾„åæ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•è·å– Class ç±»å¯¹è±¡ã€‚</p>
<blockquote>
<p><code>Class clz = Class.forName(&quot;java.lang.String&quot;);</code></p>
</blockquote>
<p>ç¬¬äºŒç§ï¼Œä½¿ç”¨ <code>.class</code> æ–¹æ³•ã€‚</p>
<p>è¿™ç§æ–¹æ³•åªé€‚åˆåœ¨ç¼–è¯‘å‰å°±çŸ¥é“æ“ä½œçš„ Class å</p>
<blockquote>
<p><code>Class clz = String.class;</code></p>
</blockquote>
<p>ç¬¬ä¸‰ç§ï¼Œä½¿ç”¨ç±»å¯¹è±¡çš„ getClass() æ–¹æ³•</p>
<blockquote>
<p><code>String str = new String(&quot;Hello&quot;);</code>
<code>Class clz = str.getClass();</code></p>
</blockquote>
<ul>
<li>è¿™ä¸‰ç§è·å–CLassç±»æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ç¬¬ä¸€ç§é€šè¿‡<code>Class.forName</code>æ–¹æ³•å»åŠ¨æ€åŠ è½½ç±»ã€‚ä¸”ä½¿ç”¨ forName å°±ä¸éœ€è¦importå¯¼å…¥å…¶ä»–ç±»ï¼Œå¯ä»¥åŠ è½½æˆ‘ä»¬ä»»æ„çš„ç±»ã€‚</li>
<li>ä½¿ç”¨ç¬¬äºŒç§<code>ç±».classå±æ€§</code>ï¼Œéœ€è¦å¯¼å…¥ç±»çš„åŒ…ï¼Œä¾èµ–æ€§å¤ªå¼ºï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­å®¹æ˜“æŠ›å‡ºç¼–è¯‘é”™è¯¯ï¼›</li>
<li>ä½¿ç”¨ç¬¬ä¸‰ç§<code>å®ä¾‹åŒ–å¯¹è±¡çš„getClass()</code>æ–¹æ³•ï¼Œéœ€è¦æœ¬èº«åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæœ¬èº«å°±æ²¡æœ‰äº†ä½¿ç”¨åå°„æœºåˆ¶æ„ä¹‰ã€‚</li>
</ul>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨è·å–classå¯¹è±¡ä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨ç¬¬ä¸€ç§<code>Class.forName</code>æ–¹æ³•å»è·å–ã€‚</p>
<h4 id="è·å–æˆå‘˜å˜é‡field">è·å–æˆå‘˜å˜é‡Field</h4>
<blockquote>
<p>è·å–æˆå‘˜å˜é‡Fieldä½äºjava.lang.reflect.FieldåŒ…ä¸­</p>
<p>Field[] getFields() ï¼šè·å–æ‰€æœ‰publicä¿®é¥°çš„æˆå‘˜å˜é‡</p>
<p>Field[] getDeclaredFields() è·å–æ‰€æœ‰çš„æˆå‘˜å˜é‡ï¼Œä¸è€ƒè™‘ä¿®é¥°ç¬¦</p>
<p>Field getField(String name) è·å–æŒ‡å®šåç§°çš„ publicä¿®é¥°çš„æˆå‘˜å˜é‡</p>
<p>Field getDeclaredField(String name) è·å–æŒ‡å®šçš„æˆå‘˜å˜é‡</p>
</blockquote>
<p>ç”¨ä¸€ä¸ªä¾‹å­ç†è§£ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Field</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FieldTest</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">profession</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">number</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">sex</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Class</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;com.dan.FieldTest&#34;</span><span class="p">);</span><span class="w"> </span><span class="c1">// åˆ›å»ºClasså¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Field</span><span class="o">[]</span><span class="w"> </span><span class="n">fieldArray1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredFields</span><span class="p">();</span><span class="w"> </span><span class="c1">//è·å–å…¨éƒ¨æˆå‘˜å˜é‡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Field</span><span class="o">[]</span><span class="w"> </span><span class="n">fieldArray2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getFields</span><span class="p">();</span><span class="c1">// è·å–å…¨éƒ¨publicæˆå‘˜å˜é‡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Field</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">fieldArray1</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">field</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;-------åˆ†å‰²çº¿---------&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Field</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">fieldArray2</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">field</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;-------åˆ†å‰²çº¿---------&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">Field</span><span class="w"> </span><span class="n">fieldArray3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getField</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">);</span><span class="w"> </span><span class="c1">// è·å–æŒ‡å®šåç§°çš„publicä¿®é¥°çš„æˆå‘˜å˜é‡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">fieldArray3</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;-------åˆ†å‰²çº¿---------&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">Field</span><span class="w"> </span><span class="n">fieldArray4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredField</span><span class="p">(</span><span class="s">&#34;number&#34;</span><span class="p">);</span><span class="w"> </span><span class="c1">// è·å–æŒ‡å®šçš„æˆå‘˜å˜é‡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">fieldArray4</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230410085740111.png"
	
	
	
	loading="lazy"
	
		alt="image-20230410085740111"
	
	
></p>
<h4 id="è·å–æˆå‘˜æ–¹æ³•method">è·å–æˆå‘˜æ–¹æ³•Method</h4>
<blockquote>
<p>Method getMethod(String name, ç±»<?>&hellip; parameterTypes) //è¿”å›è¯¥ç±»æ‰€å£°æ˜çš„publicæ–¹æ³•</p>
<p>Method getDeclaredMethod(String name, ç±»<?>&hellip; parameterTypes) //è¿”å›è¯¥ç±»æ‰€å£°æ˜çš„æ‰€æœ‰æ–¹æ³•</p>
<p>//ç¬¬ä¸€ä¸ªå‚æ•°è·å–è¯¥æ–¹æ³•çš„åå­—ï¼Œç¬¬äºŒä¸ªå‚æ•°è·å–æ ‡è¯†è¯¥æ–¹æ³•çš„å‚æ•°ç±»å‹</p>
<p>Method[] getMethods() //è·å–æ‰€æœ‰çš„publicæ–¹æ³•ï¼ŒåŒ…æ‹¬ç±»è‡ªèº«å£°æ˜çš„publicæ–¹æ³•ï¼Œçˆ¶ç±»ä¸­çš„publicæ–¹æ³•ã€å®ç°çš„æ¥å£æ–¹æ³•</p>
<p>Method[] getDeclaredMethods() // è·å–è¯¥ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Method</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MethodTest</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">study</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;å­¦ä¹ ä¸­...&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;è·‘æ­¥ä¸­...&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">eat</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;åƒé¥­ä¸­...&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">sleep</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;ç¡çœ ä¸­...&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">age</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&#34;sleep&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Class</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;com.dan.MethodTest&#34;</span><span class="p">);</span><span class="w"> </span><span class="c1">// åˆ›å»ºClasså¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Method</span><span class="o">[]</span><span class="w"> </span><span class="n">methods1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">getDeclaredMethods</span><span class="p">();</span><span class="w"> </span><span class="c1">// è·å–æ‰€æœ‰è¯¥ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Method</span><span class="o">[]</span><span class="w"> </span><span class="n">methods2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">getMethods</span><span class="p">();</span><span class="w"> </span><span class="c1">// è·å–æ‰€æœ‰çš„publicæ–¹æ³•ï¼ŒåŒ…æ‹¬ç±»è‡ªèº«å£°æ˜çš„publicæ–¹æ³•ï¼Œçˆ¶ç±»ä¸­çš„publicæ–¹æ³•ã€å®ç°çš„æ¥å£æ–¹æ³•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Method</span><span class="w"> </span><span class="n">m</span><span class="p">:</span><span class="n">methods1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">m</span><span class="p">.);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;-------åˆ†å‰²çº¿---------&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Method</span><span class="w"> </span><span class="n">m</span><span class="p">:</span><span class="n">methods2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">m</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;-------åˆ†å‰²çº¿---------&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Method</span><span class="w"> </span><span class="n">methods3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;study&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"> </span><span class="c1">// è·å–studyæ–¹æ³•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">methods3</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;-------åˆ†å‰²çº¿---------&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Method</span><span class="w"> </span><span class="n">method4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">getDeclaredMethod</span><span class="p">(</span><span class="s">&#34;sleep&#34;</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"> </span><span class="c1">// è·å–sleepæ–¹æ³•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">method4</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="c1">//public static void com.dan.MethodTest.main(java.lang.String[])</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//protected void com.dan.MethodTest.run()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//private java.lang.String com.dan.MethodTest.sleep(int)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//public void com.dan.MethodTest.study(java.lang.String)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//void com.dan.MethodTest.eat()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//-------åˆ†å‰²çº¿---------</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//public static void com.dan.MethodTest.main(java.lang.String[])</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//public void com.dan.MethodTest.study(java.lang.String)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//public final void java.lang.Object.wait(long,int) throws java.lang.InterruptedException</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//public final void java.lang.Object.wait() throws java.lang.InterruptedException</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//public final native void java.lang.Object.wait(long) throws java.lang.InterruptedException</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//public boolean java.lang.Object.equals(java.lang.Object)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//public java.lang.String java.lang.Object.toString()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//public native int java.lang.Object.hashCode()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//public final native java.lang.Class java.lang.Object.getClass()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//public final native void java.lang.Object.notify()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//public final native void java.lang.Object.notifyAll()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//-------åˆ†å‰²çº¿---------</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//public void com.dan.MethodTest.study(java.lang.String)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//-------åˆ†å‰²çº¿---------</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//private java.lang.String com.dan.MethodTest.sleep(int)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//Process finished with exit code 0</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="è·å–æ„é€ å‡½æ•°">è·å–æ„é€ å‡½æ•°</h4>
<blockquote>
<p>Constructor<?>[] getConstructors() ï¼šåªè¿”å›publicæ„é€ å‡½æ•°</p>
<p>Constructor<?>[] getDeclaredConstructors() ï¼šè¿”å›æ‰€æœ‰æ„é€ å‡½æ•°</p>
<p>Constructor&lt;&gt; getConstructor(ç±»<?>&hellip; parameterTypes) : åŒ¹é…å’Œå‚æ•°é…å‹ç›¸ç¬¦çš„publicæ„é€ å‡½æ•°</p>
<p>Constructor&lt;&gt; getDeclaredConstructor(ç±»<?>&hellip; parameterTypes) ï¼š åŒ¹é…å’Œå‚æ•°é…å‹ç›¸ç¬¦çš„æ„é€ å‡½æ•°</p>
</blockquote>
<p>ä¾‹å­æ€»æ¯”æ–‡å­—å¥½ç†è§£ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Constructor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ConstructorTest</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ConstructorTest</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;æ— å‚æ„é€ å‡½æ•°&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ConstructorTest</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;æœ‰å‚æ„é€ å‡½æ•°&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">ConstructorTest</span><span class="p">(</span><span class="kt">boolean</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;ç§æœ‰æ„é€ å‡½æ•°&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Class</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;com.dan.ConstructorTest&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">Constructor</span><span class="o">[]</span><span class="w"> </span><span class="n">constructors1</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredConstructors</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="n">Constructor</span><span class="o">[]</span><span class="w"> </span><span class="n">constructors2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getConstructors</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Constructor</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">constructors1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">c</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;-------åˆ†å‰²çº¿---------&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Constructor</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">constructors2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">c</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;-------åˆ†å‰²çº¿---------&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructors3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getConstructor</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">constructors3</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;-------åˆ†å‰²çº¿---------&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructors4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">(</span><span class="kt">boolean</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">constructors4</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230410090402836.png"
	
	
	
	loading="lazy"
	
		alt="image-20230410090402836"
	
	
></p>
<h4 id="a-nameduixiangè·å–å¯¹è±¡a"><a name='duixiang'>è·å–å¯¹è±¡</a></h4>
<ul>
<li>å…ˆè·å–ç±»çš„ Class å¯¹è±¡å®ä¾‹</li>
</ul>
<blockquote>
<p><code>Class clz = Class.forName(&quot;com.api.Apple&quot;);</code></p>
</blockquote>
<ul>
<li>æ ¹æ® Class å¯¹è±¡å®ä¾‹è·å– Constructor å‡½æ•°</li>
</ul>
<blockquote>
<p><code>Constructor appleConstructor = clz.getConstructor();</code></p>
</blockquote>
<ul>
<li>ä½¿ç”¨ Constructor å¯¹è±¡çš„ newInstance æ–¹æ³•è·å–åå°„ç±»å¯¹è±¡</li>
</ul>
<blockquote>
<p><code>Apple appleObj = (Apple)appleConstructor.newInstance();</code></p>
</blockquote>
<p>æˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ Classå¯¹è±¡ çš„<code>newInstance()</code>æ–¹æ³•æ¥è¿›è¡Œåˆ›å»ºç±»å¯¹è±¡</p>
<blockquote>
<p><code>Apple appleObj = (Apple)clz.newInstance();</code></p>
</blockquote>
<p>åŒºåˆ«åœ¨äº<strong>é€šè¿‡ Constructor å¯¹è±¡åˆ›å»ºç±»å¯¹è±¡å¯ä»¥é€‰æ‹©ç‰¹å®šæ„é€ æ–¹æ³•</strong>ï¼Œè€Œ<strong>é€šè¿‡ Class å¯¹è±¡åˆ™åªèƒ½ä½¿ç”¨é»˜è®¤çš„æ— å‚æ•°æ„é€ æ–¹æ³•</strong>ã€‚ä¸‹é¢çš„ä»£ç æ˜¯ä½¿ç”¨ä¸€ä¸ªæœ‰å‚æ•°çš„æ„é€ æ–¹æ³•è¿›è¡Œäº†ç±»å¯¹è±¡çš„åˆå§‹åŒ–</p>
<blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="n">Class</span><span class="w"> </span><span class="n">clz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Apple</span><span class="p">.</span><span class="na">class</span><span class="p">;</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clz</span><span class="p">.</span><span class="na">getConstructor</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Apple</span><span class="w"> </span><span class="n">apple</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Apple</span><span class="p">)</span><span class="n">constructor</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="s">&#34;çº¢å¯Œå£«&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">15</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<p>å¸¸ç”¨çš„æ˜¯å¦‚ä¸‹å®ä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="n">Class</span><span class="w"> </span><span class="n">clz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;com.api.Apple&#34;</span><span class="p">);</span><span class="w"> </span><span class="c1">// åˆ›å»ºClasså¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Apple</span><span class="w"> </span><span class="n">appleObj</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="p">(</span><span class="n">Apple</span><span class="p">)</span><span class="w"> </span><span class="n">clz</span><span class="p">.</span><span class="na">newInstance</span><span class="p">();</span><span class="w"> </span><span class="c1">// åˆ›å»ºç±»å¯¹è±¡</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="è°ƒç”¨æ–¹æ³•æ­¥éª¤">è°ƒç”¨æ–¹æ³•æ­¥éª¤</h4>
<p>è·å–å¯¹è±¡ä½¿ç”¨çš„æ˜¯ <code>newInstance()</code>ï¼Œé‚£ä¹ˆè°ƒç”¨å‡½æ•°ä½¿ç”¨çš„å°±æ˜¯<code>invoke()</code></p>
<blockquote>
<p><code>invoke</code>æ–¹æ³•ä½äº<code>java.lang.reflect.Method</code>ç±»ä¸­ï¼Œç”¨äºæ‰§è¡ŒæŸä¸ªçš„å¯¹è±¡çš„ç›®æ ‡æ–¹æ³•ã€‚ä¸€èˆ¬ä¼šå’ŒgetMethodæ–¹æ³•é…åˆè¿›è¡Œè°ƒç”¨ã€‚</p>
<p>invokeä½¿ç”¨å°Tipsï¼š</p>
<p><code>public Object invoke(Object obj, Object... args)</code></p>
<p>objï¼šä»ä¸­è°ƒç”¨åº•å±‚æ–¹æ³•çš„å¯¹è±¡ï¼Œå¿…é¡»æ˜¯å®ä¾‹åŒ–å¯¹è±¡
å¦‚æœè°ƒç”¨çš„è¿™ä¸ªæ–¹æ³•æ˜¯æ™®é€šæ–¹æ³•**ï¼Œ**ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ç›®æ ‡ç±»å®ä¾‹åŒ–å¯¹è±¡ï¼›
å¦‚æœè°ƒç”¨çš„è¿™ä¸ªæ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯Classå¯¹è±¡ï¼›</p>
<p>argsï¼š ç”¨äºæ–¹æ³•çš„è°ƒç”¨ï¼Œæ˜¯ä¸€ä¸ªobjectçš„æ•°ç»„ï¼Œå‚æ•°æœ‰å¯èƒ½æ˜¯å¤šä¸ª</p>
</blockquote>
<p>åŸºæœ¬æ­¥éª¤</p>
<ul>
<li>è·å–ç±»çš„ Class å¯¹è±¡å®ä¾‹</li>
</ul>
<blockquote>
<p><code>Class clz = Class.forName(&quot;com.api.Apple&quot;);</code></p>
</blockquote>
<ul>
<li>è·å–æ–¹æ³•çš„ Method å¯¹è±¡</li>
</ul>
<blockquote>
<p><code>Method setPriceMethod = clz.getMethod(&quot;setPrice&quot;, int.class);</code></p>
</blockquote>
<ul>
<li>åˆ©ç”¨ Method å¯¹è±¡çš„ invoke æ–¹æ³•è°ƒç”¨æ–¹æ³•ï¼ˆæœ¬ä¾‹å­éœ€è¦æå‰å‡†å¤‡å®ä¾‹åŒ–å¯¹è±¡ï¼‰</li>
</ul>
<blockquote>
<p><code>setPriceMethod.invoke(appleObj, 14);</code></p>
</blockquote>
<p>è°ƒç”¨æ–¹æ³•å®Œæ•´å°ä¾‹å­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.dan</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Method</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ReflectTest</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">reflectMethod</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;åå°„æµ‹è¯•æˆåŠŸ!!!&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Class</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;com.dan.ReflectTest&#34;</span><span class="p">);</span><span class="w"> </span><span class="c1">// åˆ›å»ºClasså¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Object</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">newInstance</span><span class="p">();</span><span class="w"> </span><span class="c1">// åˆ›å»ºç±»å®ä¾‹å¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;reflectMethod&#34;</span><span class="p">);</span><span class="w"> </span><span class="c1">// è·å–reflectMethodæ–¹æ³•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">method</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">m</span><span class="p">);</span><span class="w"> </span><span class="c1">// è°ƒç”¨ç±»å®ä¾‹å¯¹è±¡æ–¹æ³•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>â€‹	ä¸Šé¢è®²è¿°äº†åå°„æœºåˆ¶æµç¨‹æ¦‚å¿µå’ŒåŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œä»Classå¯¹è±¡è·å–ï¼Œåˆ°è·å–æˆå‘˜å˜é‡ã€æˆå‘˜æ–¹æ³•å’Œæ„é€ å‡½æ•°ï¼Œæ¥ç€æ˜¯newInstanceåˆ›å»ºç±»å¯¹è±¡å’Œinvokeæ–¹æ³•ï¼Œæœ€åæ˜¯ä¸€ä¸ªç®€å•åå°„ä¾‹å­çš„ç»„æˆã€‚</p>
</blockquote>
<p>å›å½’åˆ°æ¼æ´å­¦ä¹ ä¸­ï¼Œçœ‹çœ‹å¦‚ä½•ä½¿ç”¨javaåå°„ä¸­å¦‚ä½•è·å–Runtimeç±»æ¥å‘½ä»¤æ‰§è¡Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Method</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CommandExc</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;java.lang.Runtime&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="na">newInstance</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Method</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">c</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="s">&#34;calc&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šé¢çš„ä¾‹å­ä¼šæŠ¥é”™ï¼š</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230410101750816.png"
	
	
	
	loading="lazy"
	
		alt="image-20230410101750816"
	
	
></p>
<blockquote>
<p>ä½†æˆ‘ä»¬å‘ç°äº†ä½¿ç”¨newInstanceäº§ç”Ÿäº†æŠ¥é”™çš„è¯ï¼Œè€Œå¾€å¾€å…¶å¯èƒ½æ˜¯ä»¥ä¸‹åŸå› æœªèƒ½å®ç°ã€‚</p>
<p>1ã€ä½¿ç”¨çš„ç±»æ²¡æœ‰æ— å‚æ„é€ å‡½æ•°
2ã€ä½¿ç”¨çš„ç±»æ„é€ å‡½æ•°æ˜¯ç§æœ‰çš„</p>
</blockquote>
<h4 id="æ„é€ å‡½æ•°ç§æœ‰åŒ–">æ„é€ å‡½æ•°ç§æœ‰åŒ–</h4>
<p>ä¸Šä¾‹æŠ¥é”™æ˜¯å› ä¸ºæ„é€ å‡½æ•°ç§æœ‰ï¼Œæ„é€ å‡½æ•°ç§æœ‰æœ‰å¦‚ä¸‹ä½œç”¨ï¼š</p>
<ul>
<li>
<p>å•ä¾‹æ¨¡å¼</p>
<blockquote>
<p>å•ä¾‹æ¨¡å¼ä¸»è¦æœ‰3ä¸ªç‰¹ç‚¹ï¼š</p>
<ol>
<li>
<p>ç±»çš„å†…éƒ¨åŒ…æ‹¬ä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œå¹¶ä¸”ä¸ºstaticç±»å‹</p>
</li>
<li>
<p>æ„é€ å‡½æ•°ä¸ºç§æœ‰</p>
</li>
<li>
<p>é€šè¿‡æä¾›ä¸€ä¸ªè·å–å®ä¾‹çš„æ–¹æ³•ï¼Œæ¯”å¦‚getInstanceï¼Œè¯¥æ–¹æ³•ä¹Ÿä¸ºstaticç±»å‹ã€‚
è°ƒç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸäº›ç‰¹æ®Šé™æ€å‡½æ•°ä¾‹å¦‚<code>Singleton instance = Singleton.getInstance();</code>æ¥è·å¾—å®ä¾‹åŒ–çš„å¯¹è±¡</p>
</li>
</ol>
<p>å•ä¾‹æ¨¡å¼çš„ä½¿ç”¨ï¼š
å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå¯¹è±¡å°±å¯ä»¥äº†ï¼Œä¸å¸Œæœ›ç”¨æˆ·æ¥æ„é€ å¯¹è±¡ï¼Œæ¯”å¦‚çº¿ç¨‹æ± ï¼Œé©±åŠ¨ï¼Œæ˜¾ç¤ºå™¨ç­‰ã€‚å¦‚æœæŠŠæ„é€ å‡½æ•°ç§æœ‰ï¼Œé‚£ä¹ˆå¾ˆå¤šç¨‹åºéƒ½å¯ä»¥å¾—åˆ°å…¶å®ä¾‹ï¼Œå°†ä¼šå¸¦æ¥æ··ä¹±ã€‚</p>
</blockquote>
</li>
<li>
<p>é˜²æ­¢å®ä¾‹åŒ–</p>
</li>
</ul>
<blockquote>
<p>åœ¨Javaçš„å·¥å…·ç±»ä¸­ï¼Œæœ‰å¾ˆå¤šå°±æ˜¯åˆ©ç”¨è¿™ç§æ–¹æ³•</p>
<p>ä¸€ä¸ªå·¥å…·ç±»Utilsï¼Œé‡Œé¢å«æœ‰å¾ˆå¤šé™æ€å‡½æ•°æˆ–è€…é™æ€å˜é‡ï¼Œç”±äºé™æ€çš„åŸå› ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥é€šè¿‡ç±»åæ¥è®¿é—®ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±æ²¡æœ‰å¿…è¦å®ä¾‹åŒ–å®ƒä»¬ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å…¶æ„é€ å‡½æ•°è®¾ç½®ä¸ºç§æœ‰ï¼Œè¿™æ ·å°±é˜²æ­¢ç”¨æˆ·æ»¥ç”¨ã€‚</p>
</blockquote>
<p>Runtimeä¹Ÿæ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼Œæ‰€ä»¥æ„é€ å‡½æ•°æœ‰ç§æœ‰çš„å¿…è¦</p>
<p>é‚£æˆ‘ä»¬åº”è¯¥æ€ä¹ˆæ„é€ å‘¢ï¼ŸåŸæœ¬å¼¹è®¡ç®—å™¨åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<p><code>Runtime.getRuntime().exec(&quot;calc&quot;);</code></p>
<p>å¯ä»¥çœ‹åˆ°æ˜¯é€šè¿‡<code>getRuntime()</code>æ–¹æ³•è·å¾—çš„å®ä¾‹åŒ–å¯¹è±¡</p>
<p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å…ˆä½¿ç”¨åå°„è°ƒç”¨é™æ€æ–¹æ³•è·å¾—å¯¹è±¡åå†æ‰§è¡Œ<code>exec()</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Method</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CommandExc</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//        Runtime.getRuntime().exec(&#34;calc&#34;);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//        Class a = Class.forName(&#34;java.lang.Runtime&#34;);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//        Object b = a.newInstance();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//        Method c = a.getMethod(&#34;exec&#34;,String.class);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//        c.invoke(b,&#34;calc&#34;);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;java.lang.Runtime&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Method</span><span class="w"> </span><span class="n">rundan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;getRuntime&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rundan</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">a</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Method</span><span class="w"> </span><span class="n">run1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">run1</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="s">&#34;calc&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æ­¤ä¾‹ä¾¿å¯ä»¥å¼¹å‡ºè®¡ç®—æœºäº†</p>
<p>å¦‚æœå°†è¿™äº›ä»£ç ç®€åŒ–ä¸€ä¸‹ï¼Œå°±å¯ä»¥å¾—åˆ°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Class</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;java.lang.Runtime&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">a</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">invoke</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;getRuntime&#34;</span><span class="p">).</span><span class="na">invoke</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="s">&#34;calc&#34;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å¸¸è§çš„åå°„payload</p>
<p>å¦‚æœå°±æƒ³ä½¿ç”¨<code>newInstance()</code>æ¥è·å¾—æ„é€ å‘¢ï¼Œåœ¨ä¹‹å‰<a href="#duixiang">è·å¾—å¯¹è±¡</a>ä¸­æœ‰æåˆ°</p>
<blockquote>
<p>ä½¿ç”¨ Constructor å¯¹è±¡çš„ newInstance æ–¹æ³•è·å–åå°„ç±»å¯¹è±¡</p>
</blockquote>
<p>æ‰€ä»¥å¯ä»¥å…ˆè¯•è¯•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Constructor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CommandExc</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;java.lang.Runtime&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">cs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">cs</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cs</span><span class="p">.</span><span class="na">newInstance</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">a</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">invoke</span><span class="p">(</span><span class="n">o</span><span class="p">,</span><span class="s">&#34;calc&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯ä¾æ—§æŠ¥é”™ï¼š</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230410113223749.png"
	
	
	
	loading="lazy"
	
		alt="image-20230410113223749"
	
	
></p>
<p>ä½¬è¯´éœ€è¦é€šè¿‡setAccessible(true)æ¥çªç ´è®¿é—®æƒé™çš„æ£€æŸ¥</p>
<blockquote>
<p>â€‹	åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨åå°„æœºåˆ¶ä¸èƒ½å¯¹ç±»çš„ç§æœ‰privateå­—æ®µè¿›è¡Œæ“ä½œï¼Œç»•è¿‡ç§æœ‰æƒé™çš„è®¿é—®ã€‚ä½†ä¸€äº›ç‰¹æ®Šåœºæ™¯å­˜åœ¨ä¾‹å¤–çš„æ—¶å€™ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿›è¡Œåºåˆ—åŒ–æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦å»è®¿é—®è¿™äº›å—é™çš„ç§æœ‰å­—æ®µï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨AccessibleObjectä¸Šçš„setAccessible()æ–¹æ³•æ¥å…è®¸è®¿é—®ã€‚</p>
<p>â€‹	Java.lang.reflect.AccessibleObject ç±»æ˜¯Fieldï¼ŒMethodå’ŒConstructorç±»å¯¹è±¡çš„åŸºç±»ï¼Œå®ƒæä¾›äº†æ ‡è®°åå°„å¯¹è±¡çš„èƒ½åŠ›ï¼Œä»¥æŠ‘åˆ¶åœ¨ä½¿ç”¨æ—¶ä½¿ç”¨é»˜è®¤Javaè¯­è¨€è®¿é—®æ§åˆ¶æ£€æŸ¥ï¼Œä»è€Œèƒ½å¤Ÿä»»æ„è°ƒç”¨è¢«ç§æœ‰åŒ–ä¿æŠ¤çš„æ–¹æ³•ã€åŸŸå’Œæ„é€ å‡½æ•°ï¼ŒåŒæ—¶ä¸Šè¿°çš„åå°„ç±»ä¸­çš„Fieldï¼ŒMethodå’ŒConstructorç»§æ‰¿è‡ªAccessibleObjectã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨è¿™äº›ç±»æ–¹æ³•åŸºç¡€ä¸Šè°ƒç”¨setAccessible()æ–¹æ³•ï¼Œæ—¢å¯å¯¹è¿™äº›ç§æœ‰å­—æ®µè¿›è¡Œæ“ä½œã€‚</p>
</blockquote>
<p><code>setAccessible()</code>æ˜¯AccessibleObjectç±»çš„publicå‡½æ•°ï¼Œè¯¥ç±»è¢«<code>Executable</code>ç»§æ‰¿ï¼Œä¹‹å<code>Executable</code>åˆè¢«<code>Constructor</code>ç»§æ‰¿</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230410130643674.png"
	
	
	
	loading="lazy"
	
		alt="image-20230410130643674"
	
	
></p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230410130821884.png"
	
	
	
	loading="lazy"
	
		alt="image-20230410130821884"
	
	
></p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230410130845481.png"
	
	
	
	loading="lazy"
	
		alt="image-20230410130845481"
	
	
></p>
<p>æ‰€ä»¥å¯ä»¥ä½¿ç”¨Fieldï¼ŒMethodå’ŒConstructorç±»çš„å®ä¾‹åŒ–å¯¹è±¡å»è®¿é—®è¯¥å‡½æ•°ï¼Œä»£ç æ”¹è¿›ä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-JAVA" data-lang="JAVA"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Constructor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CommandExc</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;java.lang.Runtime&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">cs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">cs</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cs</span><span class="p">.</span><span class="na">newInstance</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">a</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">invoke</span><span class="p">(</span><span class="n">o</span><span class="p">,</span><span class="s">&#34;calc&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿˜æ˜¯æŠ¥é”™ï¼Œï¼Œï¼Œï¼Œ</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230410135823765.png"
	
	
	
	loading="lazy"
	
		alt="image-20230410135823765"
	
	
></p>
<p>çŒœæµ‹æ˜¯Javaç‰ˆæœ¬è¿‡æ–°ï¼Œè§£å†³åŠæ³•ï¼š</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230410135945677.png"
	
	
	
	loading="lazy"
	
		alt="image-20230410135945677"
	
	
></p>
<p>å¦‚æœæ²¡æœ‰ç±»ä¼¼æˆ‘ä¸€æ ·çš„æ–¹æ¡†çš„è¯ï¼Œæ‰¾åˆ° <code>Modify options </code>ï¼Œå»é‡Œé¢æŠŠ</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230410140041600.png"
	
	
	
	loading="lazy"
	
		alt="image-20230410140041600"
	
	
></p>
<p>è¿™ä¸ªå‹¾é€‰ä¸Šå°±æœ‰äº†ï¼Œæ–¹æ¡†é‡Œå¡«<code>--add-opens java.base/java.lang=ALL-UNNAMED</code></p>
<p>æœ€åè¿è¡Œï¼ŒæˆåŠŸå¼¹å‡ºè®¡ç®—å™¨</p>
<p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230410140153928.png"
	
	
	
	loading="lazy"
	
		alt="image-20230410140153928"
	
	
></p>
<blockquote>
<p>â€‹	åœ¨å®é™…åˆ©ç”¨åœºæ™¯å½“ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸åˆ©ç”¨Javaåå°„æœºåˆ¶æ¥ç»•è¿‡ä¸€äº›å®‰å…¨æƒé™æœºåˆ¶æ£€æŸ¥ï¼Œå¦‚è·å–privateæƒé™çš„æ–¹æ³•å’Œå±æ€§ã€‚æœ¬è´¨å°±æ˜¯æˆ‘ä»¬ç»•è¿‡è®¿é—®å®‰å…¨æ£€æŸ¥ã€‚æ‰€ä»¥é€šè¿‡javaåå°„æœºåˆ¶çš„å­¦ä¹ ï¼Œèƒ½å¤Ÿä¸ºæˆ‘ä»¬ä¸ºæˆ‘ä»¬åé¢çš„javaæ¼æ´åˆ†æè°ƒè¯•ï¼Œjavaæ¼æ´pocæµ‹è¯•å’ŒæœåŠ¡ç«¯æ¨¡æ¿å¼•æ“æ³¨å…¥ç­‰æœ‰ç€ååˆ†é‡è¦çš„æ„ä¹‰ã€‚</p>
</blockquote>
<h3 id="æ³›å‹">æ³›å‹</h3>
<p>å…³äºæ³›å‹çš„ä»‹ç»å¯ä»¥å‚è€ƒé“¾æ¥ï¼ˆ<a class="link" href="https://blog.csdn.net/qq_41701956/article/details/123473592"  target="_blank" rel="noopener"
    >Javaæ³›å‹è¯¦è§£ï¼Œå²ä¸Šæœ€å…¨å›¾æ–‡è¯¦è§£</a>ï¼‰</p>
<h3 id="ç›¸å…³è¡¥å……">ç›¸å…³è¡¥å……</h3>
<p><a name='Field'>Fieldç±»ç²—ç•¥ç†è§£</a></p>
<blockquote>
<p>â€‹	Javaä¸­çš„Fieldç±»æ˜¯åå°„æœºåˆ¶çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒçš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°è·å–å’Œæ“ä½œç±»çš„æˆå‘˜å˜é‡ï¼ŒåŒ…æ‹¬ç§æœ‰å˜é‡ã€‚ä½¿ç”¨Fieldç±»å¯ä»¥è·å–ç±»ä¸­çš„æ‰€æœ‰å˜é‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬å˜é‡åã€ç±»å‹ã€è®¿é—®ä¿®é¥°ç¬¦ç­‰ï¼Œå¹¶å¯ä»¥é€šè¿‡å®ƒä»¬è¿›è¡Œè¯»å–ã€ä¿®æ”¹æˆ–è®¾ç½®æ–°çš„å€¼ã€‚
â€‹	Fieldç±»çš„è®¾è®¡ä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨è¿è¡Œæ—¶è·å–å’Œæ“ä½œç±»çš„æˆå‘˜å˜é‡ï¼Œè¿™åœ¨æŸäº›æƒ…å†µä¸‹æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å½“éœ€è¦é€šè¿‡åå°„è·å–æˆ–è®¾ç½®æŸä¸ªç±»çš„ç§æœ‰å˜é‡æ—¶ï¼›</li>
<li>å½“éœ€è¦åŠ¨æ€åœ°åˆ›å»ºå¯¹è±¡æˆ–è€…é€šè¿‡åå°„è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œéœ€è¦è®¿é—®å¯¹è±¡ä¸­çš„æˆå‘˜å˜é‡ï¼›</li>
<li>å½“éœ€è¦å®ç°æŸäº›è‡ªå®šä¹‰çš„<strong>åºåˆ—åŒ–æˆ–è€…ååºåˆ—åŒ–</strong>æœºåˆ¶æ—¶ï¼Œéœ€è¦è·å–æˆ–è®¾ç½®å¯¹è±¡ä¸­çš„æˆå‘˜å˜é‡ã€‚</li>
</ul>
<p>å› æ­¤ï¼ŒFieldç±»çš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†æä¾›ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°è·å–å’Œæ“ä½œç±»çš„æˆå‘˜å˜é‡ã€‚</p>
</blockquote>
<p><a name='SerialCallbackContext'>SerialCallbackContextç±»ç†è§£</a></p>
<p>ctx æ˜¯ä¸€ä¸ª SerialCallbackContext ç±»å¯¹è±¡ï¼Œ SerialCallbackContextç±»æ˜¯å†…éƒ¨ç±»ï¼Œæ— æ³•åœ¨åŒ…ï¼ˆjava.ioï¼‰å¤–å¼•ç”¨ï¼Œä¸”è¯¥ç±»ä¸ºfinalï¼Œæ— æ³•è¢«ç»§æ‰¿ï¼Œè¯¥ç±»çš„æè¿°ï¼š<img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230406204223888.png"
	
	
	
	loading="lazy"
	
		alt="image-20230406204223888"
	
	
></p>
<p>å¤§æ„å°±æ˜¯</p>
<blockquote>
<p>ä»å¯¹è±¡æµå‘ä¸Šè°ƒç”¨ç±»å®šä¹‰çš„readObject/writeObjectæ–¹æ³•æ—¶çš„ä¸Šä¸‹æ–‡ã€‚ä¿å­˜å½“å‰è¢«ååºåˆ—åŒ–çš„å¯¹è±¡å’Œå½“å‰ç±»çš„æè¿°ç¬¦ã€‚è¿™ä¸ªä¸Šä¸‹æ–‡è·Ÿè¸ªæ„é€ å®ƒçš„çº¿ç¨‹ï¼Œå¹¶ä¸”åªå…è®¸ä¸€ä¸ªdefaultReadObject, readFields, defaultWriteObjectæˆ–writeFieldsçš„è°ƒç”¨ï¼Œè¿™äº›å¿…é¡»åœ¨ç±»çš„readObject/writeObjectæ–¹æ³•è¿”å›ä¹‹å‰åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸Šè°ƒç”¨ã€‚å¦‚æœæœªè®¾ç½®ä¸ºå½“å‰çº¿ç¨‹ï¼ŒgetObjæ–¹æ³•å°†æŠ›å‡ºNotActiveExceptionã€‚</p>
</blockquote>
<p>æœ‰å¦‚ä¸‹æˆå‘˜å˜é‡ï¼š</p>
<p>è¢«æ“ä½œçš„Objectï¼Œå†…å«çš„å¯¹è±¡æµç±»ï¼Œå½“å‰æ“ä½œçº¿ç¨‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">private final Object obj;
</span></span><span class="line"><span class="cl">private final ObjectStreamClass desc;
</span></span><span class="line"><span class="cl">private Thread thread;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20230406204711090.png"
	
	
	
	loading="lazy"
	
		alt="image-20230406204711090"
	
	
></p>
<h3 id="a-namelinkå‚è€ƒé“¾æ¥a"><a name='link'>å‚è€ƒé“¾æ¥</a></h3>
<p><a class="link" href="https://xz.aliyun.com/t/2041"  target="_blank" rel="noopener"
    >Javaååºåˆ—åŒ–æ¼æ´ä»å…¥é—¨åˆ°æ·±å…¥</a></p>
<p><a class="link" href="https://www.cnblogs.com/yyhuni/p/14755940.html"  target="_blank" rel="noopener"
    >JAVAååºåˆ—åŒ–æ¼æ´åŸºç¡€åŸç†</a></p>
<p><a class="link" href="https://blog.csdn.net/m0_58559010/article/details/117925076"  target="_blank" rel="noopener"
    >Java ä¸­åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†ï¼</a></p>
<p><a class="link" href="https://blog.csdn.net/github_37666068/article/details/80213623"  target="_blank" rel="noopener"
    >Java æ—¥çœ‹ä¸€ç±»ï¼ˆ53ï¼‰ä¹‹IOåŒ…ä¸­çš„SerialCallbackContextç±»</a></p>
<p><a class="link" href="https://marcuseddie.github.io/2018/java-BlockDataInputStream.html"  target="_blank" rel="noopener"
    >Java I/O 25 - BlockDataInputStream</a></p>
<p><a class="link" href="https://www.cnblogs.com/chanshuyi/p/head_first_of_reflection.html"  target="_blank" rel="noopener"
    >å¤§ç™½è¯è¯´Javaåå°„ï¼šå…¥é—¨ã€ä½¿ç”¨ã€åŸç†</a></p>
<p><a class="link" href="https://xz.aliyun.com/t/9117"  target="_blank" rel="noopener"
    >JAVAå®‰å…¨åŸºç¡€ï¼ˆäºŒï¼‰&ndash; åå°„æœºåˆ¶</a></p>
<p><a class="link" href="https://blog.csdn.net/u014088294/article/details/50061073"  target="_blank" rel="noopener"
    >Javaç§æœ‰æ„é€ å‡½æ•°çš„ä½¿ç”¨</a></p>
<p><a class="link" href="https://blog.csdn.net/qq_41701956/article/details/123473592"  target="_blank" rel="noopener"
    >Javaæ³›å‹è¯¦è§£ï¼Œå²ä¸Šæœ€å…¨å›¾æ–‡è¯¦è§£</a></p>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/java%E5%AD%A6%E4%B9%A0%E8%B7%AF/">Javaå­¦ä¹ è·¯</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/javaproxystudy/">
        
        
            <div class="article-image">
                
                    <img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20240728010634169.png" loading="lazy" data-key="JavaProxyStudy" data-hash="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20240728010634169.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Javaä»£ç†æ¨¡å¼</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/designmode/">
        
        
            <div class="article-image">
                
                    <img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20240805210553120.png" loading="lazy" data-key="DesignMode" data-hash="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20240805210553120.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">ç¨‹åºçš„è®¾è®¡æ¨¡å¼</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/cc1demo/">
        
        
            <div class="article-image">
                
                    <img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20240721160313033.png" loading="lazy" data-key="" data-hash="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20240721160313033.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">CC1Demo</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/rmi-study/">
        
        
            <div class="article-image">
                
                    <img src="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20240409172707180.png" loading="lazy" data-key="" data-hash="https://d4n-picture-database.oss-cn-beijing.aliyuncs.com/img/image-20240409172707180.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Rmi Study</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2024 DanSec
    </section>
    
    <section class="powerby">
        
            Danâ¤Anan <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.23.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
